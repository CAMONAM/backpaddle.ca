<!DOCTYPE html>
<html>
<head>
    <title>Temagami 2021 - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar { position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%); color: white; padding: 10px 15px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel { position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 16px 16px 0 0; box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000; max-height: 50vh; transition: transform 0.3s ease; }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) { .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); } .info-panel.collapsed { transform: translateY(0); } .info-panel.collapsed .panel-content { display: none; } .panel-handle { display: none; } }
    </style>
<script src="/gate.js"></script>
</head>
<body>
    <div class="header-bar"><a href="../../">‚Üê Back</a><a href="../../"><h1>üõ∂ Temagami 2021</h1></a><span style="width:40px"></span></div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 20 km</p>
            <p><strong>Region:</strong> Temagami</p>
            <p><strong>Date:</strong> Sep 2021</p>
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[47.005675,-79.879982],[47.005606,-79.879939],[47.005615,-79.879951],[47.005594,-79.879888],[47.005578,-79.879886],[47.00553,-79.879918],[47.005291,-79.880062],[47.005018,-79.880208],[47.004786,-79.880312],[47.00441,-79.87992],[47.004101,-79.879285],[47.003977,-79.878863],[47.003895,-79.878735],[47.003699,-79.878374],[47.003528,-79.878013],[47.003282,-79.877439],[47.003081,-79.877014],[47.002859,-79.876459],[47.002659,-79.87585],[47.002313,-79.875191],[47.0021,-79.87492],[47.001886,-79.87471],[47.00144,-79.874298],[47.001151,-79.874014],[47.000922,-79.87399],[47.000717,-79.873911],[47.000441,-79.873862],[47.000117,-79.873697],[46.999623,-79.873174],[46.999174,-79.87252],[46.998939,-79.872189],[46.998394,-79.871457],[46.998225,-79.871208],[46.998224,-79.871141],[46.998328,-79.87093],[46.998188,-79.870659],[46.99779,-79.870336],[46.997413,-79.870066],[46.997137,-79.86973],[46.996848,-79.868991],[46.996705,-79.868634],[46.9965,-79.868103],[46.996395,-79.867704],[46.996118,-79.867022],[46.995986,-79.866552],[46.995864,-79.866183],[46.995716,-79.865804],[46.995589,-79.865552],[46.995532,-79.865401],[46.995588,-79.865366],[46.99555,-79.865061],[46.995435,-79.864915],[46.995348,-79.864823],[46.995047,-79.865034],[46.994653,-79.865232],[46.994299,-79.865145],[46.994217,-79.864865],[46.994297,-79.864193],[46.994343,-79.863566],[46.994435,-79.862754],[46.994484,-79.862319],[46.994495,-79.861902],[46.994468,-79.861846],[46.994423,-79.861773],[46.994389,-79.861696],[46.994066,-79.861612],[46.993797,-79.861926],[46.993465,-79.86228],[46.993034,-79.862611],[46.992615,-79.86286],[46.992191,-79.863119],[46.991961,-79.863334],[46.991598,-79.863696],[46.991289,-79.86407],[46.990825,-79.864584],[46.990449,-79.864919],[46.990052,-79.865148],[46.989945,-79.865217],[46.989927,-79.865223],[46.989893,-79.865254],[46.989883,-79.865355],[46.989964,-79.865345],[46.989995,-79.865279],[46.989912,-79.865325],[46.989866,-79.8653],[46.989868,-79.865362],[46.989962,-79.865386],[46.989978,-79.8653],[46.98991,-79.865285],[46.989864,-79.86532],[46.989863,-79.865313],[46.98993,-79.865335],[46.989919,-79.865314],[46.989809,-79.865386],[46.98972,-79.865547],[46.989602,-79.865709],[46.989558,-79.865869],[46.98953,-79.866015],[46.989474,-79.866485],[46.989426,-79.866721],[46.989434,-79.8671],[46.989362,-79.867147],[46.989213,-79.867297],[46.988974,-79.867419],[46.988956,-79.867659],[46.988792,-79.867794],[46.988629,-79.867914],[46.988513,-79.867918],[46.988585,-79.868043],[46.988771,-79.867955],[46.988895,-79.867831],[46.988769,-79.867895],[46.988684,-79.86795],[46.988603,-79.867946],[46.988598,-79.867985],[46.988505,-79.868015],[46.988588,-79.868036],[46.988657,-79.868163],[46.988654,-79.868108],[46.988595,-79.868056],[46.98859,-79.868049],[46.988565,-79.867995],[46.988582,-79.867994],[46.988522,-79.86796],[46.988577,-79.868016],[46.988586,-79.867998],[46.988571,-79.867992],[46.988515,-79.86795],[46.988515,-79.867952],[46.988596,-79.868035],[46.988528,-79.868056],[46.988486,-79.868115],[46.988519,-79.868279],[46.988513,-79.86837],[46.988478,-79.868246],[46.988383,-79.868156],[46.988269,-79.868241],[46.988198,-79.868337],[46.988039,-79.868653],[46.987724,-79.869005],[46.987392,-79.869379],[46.9869,-79.86988],[46.986582,-79.870234],[46.986287,-79.870609],[46.985882,-79.87111],[46.985406,-79.871662],[46.984858,-79.872254],[46.984449,-79.872718],[46.983962,-79.873258],[46.983539,-79.873637],[46.983058,-79.874133],[46.983019,-79.874362],[46.982803,-79.87449],[46.98262,-79.874726],[46.982322,-79.875083],[46.982012,-79.87541],[46.981573,-79.875789],[46.981148,-79.876201],[46.980851,-79.876392],[46.980392,-79.87668],[46.979909,-79.876887],[46.979525,-79.877194],[46.979057,-79.877601],[46.978457,-79.87824],[46.978177,-79.878551],[46.977927,-79.878773],[46.977762,-79.87895],[46.977573,-79.879128],[46.977401,-79.879326],[46.97719,-79.879529],[46.976889,-79.879987],[46.976437,-79.880504],[46.97616,-79.881041],[46.975982,-79.881414],[46.975681,-79.881872],[46.975464,-79.882214],[46.975243,-79.882522],[46.97504,-79.883021],[46.974925,-79.883316],[46.974799,-79.883602],[46.974692,-79.883852],[46.974584,-79.884163],[46.974423,-79.884439],[46.974258,-79.884527],[46.974088,-79.884228],[46.973712,-79.883807],[46.973365,-79.88342],[46.973048,-79.883093],[46.972761,-79.882897],[46.972421,-79.882739],[46.972238,-79.882761],[46.972067,-79.882785],[46.971815,-79.882869],[46.971537,-79.882959],[46.971137,-79.88301],[46.970616,-79.883096],[46.970255,-79.883026],[46.96973,-79.882958],[46.96931,-79.882921],[46.968972,-79.882842],[46.968502,-79.882697],[46.968063,-79.882482],[46.967614,-79.882181],[46.967037,-79.881868],[46.966506,-79.881476],[46.96588,-79.880828],[46.965515,-79.880551],[46.965198,-79.880352],[46.965045,-79.880269],[46.964602,-79.880079],[46.964062,-79.879755],[46.96368,-79.879771],[46.963264,-79.879838],[46.963063,-79.879841],[46.962494,-79.879908],[46.962001,-79.880017],[46.961692,-79.880145],[46.961224,-79.88026],[46.961038,-79.880244],[46.960423,-79.880445],[46.960112,-79.880531],[46.959897,-79.880612],[46.959433,-79.88061],[46.958852,-79.880527],[46.95833,-79.880299],[46.957923,-79.880068],[46.957516,-79.879944],[46.957204,-79.879913],[46.956858,-79.879958],[46.956604,-79.880002],[46.95632,-79.879978],[46.955935,-79.879916],[46.95549,-79.879842],[46.955207,-79.87979],[46.954737,-79.879772],[46.954357,-79.879799],[46.953956,-79.879809],[46.953728,-79.879775],[46.953203,-79.879746],[46.952763,-79.87958],[46.952261,-79.879373],[46.951633,-79.879164],[46.951081,-79.878991],[46.950783,-79.87893],[46.950353,-79.878847],[46.950029,-79.878831],[46.949449,-79.87875],[46.949009,-79.878769],[46.948617,-79.878754],[46.948368,-79.878691],[46.947945,-79.878634],[46.947575,-79.878528],[46.947289,-79.878415],[46.947013,-79.878368],[46.946618,-79.878229],[46.946305,-79.878043],[46.9459,-79.877899],[46.945744,-79.877834],[46.945601,-79.877816],[46.945321,-79.877728],[46.944966,-79.877553],[46.944647,-79.877507],[46.944537,-79.877567],[46.944111,-79.87733],[46.943896,-79.877104],[46.943685,-79.876962],[46.943408,-79.876655],[46.942892,-79.876297],[46.942514,-79.875967],[46.942368,-79.875142],[46.942239,-79.874625],[46.942078,-79.874459],[46.94161,-79.874649],[46.941323,-79.875003],[46.941172,-79.87523],[46.940782,-79.875656],[46.940253,-79.876094],[46.939961,-79.876313],[46.939578,-79.876505],[46.939248,-79.876738],[46.939181,-79.877159],[46.939056,-79.878084],[46.939048,-79.878582],[46.939014,-79.879101],[46.938953,-79.879805],[46.939012,-79.880542],[46.939085,-79.881566],[46.939116,-79.882154],[46.939141,-79.882607],[46.939273,-79.883172],[46.939365,-79.883647],[46.939539,-79.884176],[46.939683,-79.884388],[46.939786,-79.884388],[46.939778,-79.884313],[46.939782,-79.884318],[46.939777,-79.884268],[46.93975,-79.884227],[46.939782,-79.884217],[46.939805,-79.884208],[46.939948,-79.884138],[46.939971,-79.884085],[46.939945,-79.884095],[46.940011,-79.883914],[46.9401,-79.883673],[46.940148,-79.88355],[46.940073,-79.883481],[46.940105,-79.883491],[46.940018,-79.883704],[46.939951,-79.883894],[46.939904,-79.88398],[46.939983,-79.884098],[46.939968,-79.884123],[46.939913,-79.884133],[46.939947,-79.884129],[46.939961,-79.884055],[46.939948,-79.884093],[46.939907,-79.884177],[46.939943,-79.884121],[46.939968,-79.884131],[46.939954,-79.884139],[46.939961,-79.884126],[46.939942,-79.884069],[46.939976,-79.884066],[46.939982,-79.884107],[46.939967,-79.88413],[46.939992,-79.884081],[46.940007,-79.884078],[46.940007,-79.884076],[46.940007,-79.884077],[46.940007,-79.884078],[46.940007,-79.884078],[46.939949,-79.884117],[46.939987,-79.884045],[46.939955,-79.884097],[46.940007,-79.884118],[46.939515,-79.880832],[46.939652,-79.880392],[46.939697,-79.88013],[46.939994,-79.879997],[46.940418,-79.879862],[46.940675,-79.879786],[46.941045,-79.879722],[46.9416,-79.87967],[46.941988,-79.879695],[46.942425,-79.879661],[46.942709,-79.879576],[46.942989,-79.87956],[46.943322,-79.879496],[46.943654,-79.879477],[46.944066,-79.879395],[46.944519,-79.879334],[46.945018,-79.879204],[46.945614,-79.879157],[46.946137,-79.879123],[46.946427,-79.879073],[46.946616,-79.879085],[46.947043,-79.878991],[46.947602,-79.878889],[46.948112,-79.878871],[46.948574,-79.878884],[46.948869,-79.878881],[46.949255,-79.87892],[46.949681,-79.878929],[46.950021,-79.878975],[46.950247,-79.87897],[46.950553,-79.878967],[46.951095,-79.879137],[46.951468,-79.879328],[46.951936,-79.879477],[46.952389,-79.879621],[46.95278,-79.879708],[46.953275,-79.879808],[46.953562,-79.879816],[46.953838,-79.879836],[46.95447,-79.879949],[46.954906,-79.880039],[46.955465,-79.880075],[46.955841,-79.880058],[46.956537,-79.880015],[46.9571,-79.87999],[46.957593,-79.88002],[46.957963,-79.88016],[46.958416,-79.8804],[46.958857,-79.880525],[46.959475,-79.880672],[46.959838,-79.880654],[46.960222,-79.880554],[46.960605,-79.880495],[46.960818,-79.880404],[46.961259,-79.880252],[46.9617,-79.880094],[46.961992,-79.879988],[46.96233,-79.879921],[46.962863,-79.879847],[46.963246,-79.879824],[46.963566,-79.879779],[46.963966,-79.879839],[46.964629,-79.880167],[46.96502,-79.880316],[46.965433,-79.88062],[46.965589,-79.880737],[46.966036,-79.881119],[46.966617,-79.881522],[46.96697,-79.881781],[46.967425,-79.881988],[46.96795,-79.882165],[46.968205,-79.882238],[46.968352,-79.882303],[46.968725,-79.88244],[46.96921,-79.882577],[46.969523,-79.882668],[46.969807,-79.882709],[46.970199,-79.882822],[46.97085,-79.882811],[46.97131,-79.882794],[46.971909,-79.882789],[46.972412,-79.882784],[46.972988,-79.883185],[46.97333,-79.883521],[46.973849,-79.884089],[46.974118,-79.88422],[46.974644,-79.883897],[46.974876,-79.88355],[46.975174,-79.882797],[46.975299,-79.882562],[46.975648,-79.882043],[46.975913,-79.881663],[46.976097,-79.881264],[46.976342,-79.880853],[46.97669,-79.880265],[46.976961,-79.879962],[46.977183,-79.87968],[46.977577,-79.879279],[46.977981,-79.87893],[46.978193,-79.878753],[46.978664,-79.878289],[46.979258,-79.877692],[46.979629,-79.877311],[46.979945,-79.877],[46.980353,-79.876699],[46.980791,-79.876261],[46.981118,-79.875875],[46.98149,-79.875528],[46.982081,-79.874958],[46.98278,-79.874252],[46.983329,-79.873783],[46.984049,-79.873131],[46.984511,-79.872674],[46.985108,-79.872025],[46.98554,-79.871545],[46.985922,-79.871131],[46.986221,-79.870763],[46.986571,-79.870366],[46.986919,-79.869996],[46.987197,-79.869658],[46.987494,-79.869365],[46.987927,-79.868904],[46.988226,-79.868499],[46.988481,-79.868127],[46.988507,-79.868056],[46.988488,-79.868103],[46.988539,-79.868122],[46.988549,-79.86808],[46.988543,-79.867977],[46.988564,-79.868001],[46.988535,-79.868036],[46.988522,-79.868039],[46.988513,-79.867972],[46.988496,-79.868039],[46.988519,-79.86805],[46.98859,-79.867846],[46.988636,-79.867562],[46.988685,-79.867395],[46.988659,-79.867977],[46.988592,-79.868008],[46.988609,-79.867985],[46.988514,-79.868005],[46.988577,-79.86803],[46.988758,-79.867954],[46.988841,-79.867913],[46.988892,-79.867745],[46.988969,-79.867614],[46.989089,-79.867542],[46.989299,-79.867383],[46.989383,-79.867323],[46.989495,-79.866903],[46.989482,-79.866795],[46.989551,-79.866578],[46.989598,-79.866403],[46.989558,-79.866242],[46.989599,-79.866005],[46.989627,-79.86574],[46.989746,-79.865551],[46.989809,-79.865451],[46.989913,-79.865357],[46.989952,-79.865295],[46.989939,-79.865304],[46.989963,-79.865336],[46.99,-79.865295],[46.989967,-79.865326],[46.989907,-79.865333],[46.990036,-79.865283],[46.990205,-79.865217],[46.990685,-79.864849],[46.991077,-79.864447],[46.991444,-79.864119],[46.991818,-79.863773],[46.992237,-79.863396],[46.992557,-79.86319],[46.993091,-79.862991],[46.993691,-79.862728],[46.99382,-79.862812],[46.994073,-79.863163],[46.994172,-79.863479],[46.994197,-79.864096],[46.994207,-79.864529],[46.994275,-79.865178],[46.994979,-79.86538],[46.995446,-79.865379],[46.995667,-79.865737],[46.995828,-79.86639],[46.996027,-79.867234],[46.996308,-79.867986],[46.996571,-79.868585],[46.996857,-79.869109],[46.997162,-79.869551],[46.997515,-79.869981],[46.997908,-79.870352],[46.998244,-79.870704],[46.99854,-79.871087],[46.998933,-79.87171],[46.999447,-79.872451],[46.999902,-79.873071],[47.000443,-79.873715],[47.000786,-79.873991],[47.001139,-79.874055],[47.001534,-79.87451],[47.001791,-79.874707],[47.002327,-79.875206],[47.002606,-79.875785],[47.002804,-79.876327],[47.002957,-79.8767],[47.003168,-79.877191],[47.003462,-79.877848],[47.003686,-79.878375],[47.003906,-79.878832],[47.004084,-79.879309],[47.004285,-79.879732],[47.004694,-79.880237],[47.005088,-79.880135],[47.005546,-79.879924],[47.005612,-79.87993],[47.005609,-79.879948],[47.005643,-79.879963],[47.005676,-79.880207],[47.005682,-79.880241]];
        const waypoints = [{"lat":47.005675,"lng":-79.879982,"label":"Start","type":"start"},{"lat":46.939732,"lng":-79.876405,"label":"10"},{"lat":47.005682,"lng":-79.880241,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {cyclosm, topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [46.9723175, -79.8730695], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>