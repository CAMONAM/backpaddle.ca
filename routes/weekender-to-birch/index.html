<!DOCTYPE html>
<html>
<head>
    <title>Weekender to Birch - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar {
            position: absolute; top: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%);
            color: white; padding: 10px 15px; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: white; border-radius: 16px 16px 0 0;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000;
            max-height: 50vh; transition: transform 0.3s ease;
        }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) {
            .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); }
            .info-panel.collapsed { transform: translateY(0); }
            .info-panel.collapsed .panel-content { display: none; }
            .panel-handle { display: none; }
        }
    </style>
<script src="/gate.js"></script>
</head>
<body>
    <div class="header-bar">
        <a href="../../">‚Üê Back</a>
        <a href="../../"><h1>üõ∂ Weekender to Birch</h1></a>
        <span style="width:40px"></span>
    </div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 25 km</p>
            <p><strong>Region:</strong> Ontario</p>
            <p><strong>Date:</strong> Sep 2022</p>
            
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[45.558548,-80.262909],[45.55824,-80.262661],[45.557841,-80.262219],[45.557624,-80.262097],[45.557411,-80.261872],[45.557033,-80.261493],[45.556699,-80.260999],[45.556307,-80.260374],[45.556026,-80.259826],[45.555781,-80.259457],[45.555534,-80.258994],[45.555331,-80.258575],[45.555145,-80.258217],[45.554931,-80.257679],[45.554803,-80.257221],[45.554686,-80.256339],[45.554691,-80.255598],[45.554717,-80.254412],[45.5547,-80.253277],[45.554691,-80.252044],[45.554738,-80.251007],[45.554776,-80.250091],[45.554764,-80.249429],[45.554767,-80.248474],[45.554793,-80.247903],[45.55484,-80.247134],[45.554963,-80.246372],[45.555163,-80.245438],[45.555405,-80.244071],[45.555564,-80.242744],[45.555716,-80.241227],[45.555941,-80.240575],[45.556005,-80.239537],[45.5562,-80.238432],[45.556435,-80.237171],[45.556608,-80.235728],[45.556802,-80.234583],[45.556949,-80.233351],[45.556748,-80.232249],[45.556383,-80.231805],[45.556165,-80.231086],[45.55607,-80.230541],[45.555881,-80.229561],[45.555828,-80.228764],[45.555705,-80.227726],[45.55563,-80.227165],[45.555567,-80.226738],[45.555477,-80.225768],[45.555313,-80.224668],[45.555184,-80.223961],[45.555027,-80.223058],[45.554908,-80.222632],[45.55477,-80.222069],[45.554679,-80.221543],[45.554657,-80.220807],[45.554701,-80.220126],[45.55473,-80.219675],[45.554743,-80.219183],[45.554777,-80.218551],[45.554803,-80.217837],[45.554795,-80.21681],[45.554886,-80.215826],[45.554858,-80.215185],[45.555088,-80.214512],[45.555092,-80.213954],[45.555068,-80.213408],[45.555071,-80.212487],[45.555111,-80.211414],[45.555083,-80.21068],[45.55516,-80.20991],[45.555145,-80.209451],[45.55509,-80.208985],[45.55506,-80.208559],[45.555062,-80.207755],[45.555032,-80.207288],[45.555019,-80.206896],[45.55502,-80.206486],[45.55503,-80.205948],[45.555028,-80.205218],[45.555037,-80.204661],[45.555053,-80.203895],[45.555182,-80.203332],[45.555363,-80.202508],[45.555403,-80.201799],[45.555417,-80.201257],[45.555328,-80.200927],[45.55524,-80.200171],[45.555103,-80.199335],[45.555005,-80.198871],[45.555151,-80.198293],[45.55503,-80.197893],[45.554859,-80.197799],[45.554864,-80.197814],[45.554883,-80.1978],[45.554876,-80.197734],[45.554796,-80.197555],[45.554739,-80.197029],[45.554858,-80.19665],[45.555083,-80.196232],[45.555185,-80.195491],[45.555209,-80.194717],[45.555074,-80.194229],[45.554885,-80.19367],[45.554827,-80.19366],[45.554849,-80.193794],[45.554833,-80.193772],[45.554804,-80.193743],[45.554872,-80.193766],[45.554873,-80.193792],[45.554873,-80.193819],[45.554864,-80.193837],[45.554742,-80.193825],[45.55477,-80.193811],[45.554869,-80.193757],[45.554733,-80.193805],[45.554756,-80.193833],[45.554685,-80.193822],[45.554734,-80.193837],[45.554863,-80.193856],[45.554775,-80.193806],[45.554646,-80.193933],[45.554739,-80.19378],[45.554723,-80.193524],[45.554695,-80.193389],[45.554595,-80.193255],[45.554532,-80.19309],[45.554295,-80.192798],[45.554034,-80.192466],[45.553747,-80.19222],[45.553358,-80.192348],[45.553178,-80.192415],[45.55294,-80.192259],[45.552691,-80.191981],[45.552353,-80.191833],[45.552063,-80.192295],[45.551772,-80.192139],[45.551491,-80.191985],[45.551256,-80.191847],[45.551176,-80.191868],[45.551124,-80.191553],[45.550865,-80.190864],[45.550724,-80.190612],[45.550702,-80.190206],[45.550741,-80.189873],[45.550593,-80.189071],[45.550606,-80.188771],[45.550271,-80.188371],[45.550222,-80.188332],[45.550344,-80.188627],[45.55058,-80.18863],[45.551073,-80.188094],[45.550833,-80.187463],[45.550825,-80.187718],[45.550933,-80.188122],[45.550555,-80.188415],[45.550464,-80.18901],[45.550624,-80.189325],[45.550634,-80.189782],[45.550596,-80.190313],[45.550665,-80.1907],[45.55085,-80.19105],[45.551021,-80.191528],[45.551151,-80.191921],[45.551144,-80.191903],[45.551126,-80.191776],[45.551071,-80.191419],[45.550909,-80.191096],[45.550731,-80.190709],[45.550643,-80.190363],[45.550635,-80.190006],[45.550703,-80.189826],[45.550687,-80.189459],[45.550518,-80.188999],[45.550729,-80.188462],[45.550876,-80.187629],[45.550754,-80.187474],[45.550732,-80.18745],[45.550739,-80.187451],[45.550762,-80.187473],[45.550763,-80.187471],[45.550764,-80.187517],[45.550776,-80.187515],[45.550816,-80.187473],[45.550781,-80.187431],[45.550775,-80.187403],[45.550803,-80.18744],[45.550803,-80.187389],[45.550804,-80.187375],[45.550807,-80.187362],[45.550806,-80.187426],[45.550797,-80.187384],[45.550826,-80.187339],[45.550779,-80.187399],[45.550826,-80.18744],[45.550784,-80.187418],[45.550728,-80.187146],[45.550623,-80.186802],[45.55062,-80.186323],[45.550383,-80.185416],[45.550132,-80.184437],[45.549914,-80.183926],[45.549407,-80.182959],[45.549075,-80.182309],[45.548709,-80.181773],[45.548385,-80.181275],[45.548107,-80.180865],[45.547895,-80.180525],[45.547739,-80.18025],[45.547432,-80.179698],[45.547081,-80.17933],[45.546769,-80.179396],[45.546699,-80.179371],[45.546163,-80.179414],[45.54562,-80.179716],[45.545378,-80.18006],[45.545188,-80.180847],[45.545153,-80.18144],[45.545194,-80.182216],[45.545339,-80.183533],[45.545286,-80.184539],[45.54549,-80.184869],[45.545323,-80.185495],[45.545095,-80.186168],[45.544865,-80.186627],[45.544595,-80.186958],[45.544058,-80.187036],[45.543613,-80.187053],[45.543219,-80.18691],[45.542952,-80.186873],[45.542602,-80.186811],[45.542026,-80.186595],[45.541404,-80.185836],[45.54113,-80.184811],[45.540908,-80.184462],[45.540746,-80.182959],[45.540528,-80.181998],[45.540009,-80.180997],[45.539689,-80.180451],[45.539706,-80.180431],[45.53932,-80.179918],[45.538827,-80.179184],[45.53849,-80.178822],[45.538195,-80.178524],[45.537882,-80.178191],[45.537536,-80.177724],[45.537198,-80.17731],[45.536886,-80.176889],[45.536752,-80.176426],[45.536742,-80.176164],[45.536504,-80.176168],[45.536476,-80.176329],[45.536672,-80.176247],[45.536718,-80.176198],[45.536523,-80.176258],[45.536502,-80.176236],[45.536446,-80.176303],[45.536654,-80.17623],[45.536466,-80.176108],[45.536281,-80.176218],[45.536674,-80.176164],[45.536646,-80.176241],[45.536691,-80.176189],[45.536754,-80.176223],[45.5366,-80.17618],[45.536572,-80.176247],[45.536511,-80.176275],[45.536548,-80.176257],[45.536581,-80.176185],[45.536531,-80.176185],[45.536522,-80.176161],[45.536491,-80.17625],[45.536499,-80.176246],[45.536558,-80.176249],[45.53654,-80.176228],[45.537506,-80.179244],[45.53757,-80.179796],[45.537878,-80.180797],[45.53817,-80.182013],[45.538563,-80.182728],[45.539064,-80.183348],[45.539754,-80.184105],[45.540562,-80.185169],[45.541403,-80.186158],[45.542,-80.1867],[45.542624,-80.187357],[45.542648,-80.187016],[45.542267,-80.186687],[45.541673,-80.186159],[45.541253,-80.185424],[45.540793,-80.184173],[45.54035,-80.182991],[45.539737,-80.181542],[45.539183,-80.180504],[45.538851,-80.179769],[45.538522,-80.179087],[45.538072,-80.178414],[45.537671,-80.177712],[45.537041,-80.176916],[45.536785,-80.176134],[45.536796,-80.176297],[45.536908,-80.176949],[45.537231,-80.177822],[45.53766,-80.178715],[45.538075,-80.179347],[45.538697,-80.18023],[45.539314,-80.18125],[45.539753,-80.182307],[45.54028,-80.183571],[45.540556,-80.184336],[45.540875,-80.185055],[45.541203,-80.18576],[45.542008,-80.186611],[45.542719,-80.186995],[45.543446,-80.187287],[45.544268,-80.187429],[45.54458,-80.187515],[45.545169,-80.186714],[45.545347,-80.185978],[45.545363,-80.185552],[45.54536,-80.184757],[45.545403,-80.18445],[45.545354,-80.183948],[45.545233,-80.183502],[45.545037,-80.1827],[45.544906,-80.18173],[45.545033,-80.180909],[45.545626,-80.179909],[45.545973,-80.179407],[45.546584,-80.179271],[45.547393,-80.179367],[45.547732,-80.179819],[45.548026,-80.180358],[45.548405,-80.181025],[45.548761,-80.181751],[45.549082,-80.182338],[45.549631,-80.183339],[45.549992,-80.184423],[45.550274,-80.185475],[45.550524,-80.18677],[45.550712,-80.187342],[45.550687,-80.18743],[45.550695,-80.187437],[45.550677,-80.18744],[45.550614,-80.187387],[45.550698,-80.18739],[45.550669,-80.187425],[45.550716,-80.187403],[45.550712,-80.187436],[45.55066,-80.187405],[45.550639,-80.187326],[45.550685,-80.187477],[45.550713,-80.187343],[45.550658,-80.187446],[45.550863,-80.187881],[45.550785,-80.188296],[45.550587,-80.188453],[45.55047,-80.188759],[45.550672,-80.189273],[45.550657,-80.189811],[45.550649,-80.190439],[45.550704,-80.190783],[45.55092,-80.191285],[45.551043,-80.191626],[45.551203,-80.191875],[45.551502,-80.192145],[45.551858,-80.192275],[45.55213,-80.192355],[45.552418,-80.191947],[45.552591,-80.19211],[45.552974,-80.1925],[45.553214,-80.192608],[45.553457,-80.192548],[45.55371,-80.192431],[45.554044,-80.192712],[45.55442,-80.193089],[45.554447,-80.193338],[45.554688,-80.193732],[45.554856,-80.193807],[45.55494,-80.193707],[45.554959,-80.193763],[45.554869,-80.193719],[45.554836,-80.193724],[45.554971,-80.19381],[45.555069,-80.193759],[45.554966,-80.193748],[45.554853,-80.193684],[45.55484,-80.193767],[45.554755,-80.193715],[45.554781,-80.193745],[45.554816,-80.193753],[45.554854,-80.193755],[45.555045,-80.194555],[45.554982,-80.195269],[45.554983,-80.19591],[45.55473,-80.196591],[45.554657,-80.197127],[45.55474,-80.197684],[45.554732,-80.197771],[45.554786,-80.197734],[45.554803,-80.197768],[45.554826,-80.197775],[45.554884,-80.197843],[45.554994,-80.198343],[45.554894,-80.198908],[45.555054,-80.199693],[45.55515,-80.200165],[45.555223,-80.200714],[45.555321,-80.201289],[45.555305,-80.201992],[45.555311,-80.20295],[45.555326,-80.203848],[45.555331,-80.204907],[45.555256,-80.205767],[45.555237,-80.206606],[45.55521,-80.207777],[45.555235,-80.208946],[45.555206,-80.209239],[45.555215,-80.209888],[45.555232,-80.2112],[45.555264,-80.212039],[45.555319,-80.212989],[45.5554,-80.213619],[45.555416,-80.214643],[45.555394,-80.215416],[45.555205,-80.21656],[45.555068,-80.217671],[45.55494,-80.218862],[45.554868,-80.219516],[45.554766,-80.220384],[45.554786,-80.221176],[45.554882,-80.222052],[45.555035,-80.223053],[45.555195,-80.223982],[45.555321,-80.224729],[45.55552,-80.2257],[45.55573,-80.226868],[45.556021,-80.228419],[45.556152,-80.229192],[45.556208,-80.229837],[45.556423,-80.230799],[45.556621,-80.231574],[45.556794,-80.232291],[45.556968,-80.233112],[45.557038,-80.233599],[45.556947,-80.234656],[45.556892,-80.235418],[45.55681,-80.236217],[45.556753,-80.237259],[45.55665,-80.238277],[45.556481,-80.238889],[45.556255,-80.239709],[45.555823,-80.2407],[45.555694,-80.241611],[45.55567,-80.242443],[45.555515,-80.243501],[45.555399,-80.244811],[45.555364,-80.245739],[45.555344,-80.246569],[45.55529,-80.247523],[45.55517,-80.248772],[45.555107,-80.249453],[45.555027,-80.250147],[45.554866,-80.251011],[45.554856,-80.251847],[45.554854,-80.252844],[45.554807,-80.253533],[45.554781,-80.254129],[45.55481,-80.254713],[45.554831,-80.255146],[45.554761,-80.255554],[45.554675,-80.2564],[45.554691,-80.256819],[45.554887,-80.257724],[45.555174,-80.258331],[45.555574,-80.258799],[45.556047,-80.259572],[45.556549,-80.260501],[45.557042,-80.261419],[45.557871,-80.262094],[45.558362,-80.262671],[45.558743,-80.263141],[45.559254,-80.263759],[45.559783,-80.264595],[45.560115,-80.265162],[45.560271,-80.265512],[45.56015,-80.266046],[45.560157,-80.2664],[45.560135,-80.265875],[45.560186,-80.26523],[45.560167,-80.265182],[45.560127,-80.265158],[45.560107,-80.265121],[45.560092,-80.265126],[45.560187,-80.265176],[45.560116,-80.265196],[45.560136,-80.265172],[45.560177,-80.265223],[45.560152,-80.26509],[45.560137,-80.265093],[45.560036,-80.265375],[45.560022,-80.265539],[45.560179,-80.265229],[45.560148,-80.265215],[45.560174,-80.26521],[45.560173,-80.265227],[45.560171,-80.265213],[45.560172,-80.265219],[45.56017,-80.265223],[45.560169,-80.265224],[45.560167,-80.265222],[45.56036,-80.266737],[45.560639,-80.268703],[45.56041,-80.270168]];
        const waypoints = [{"lat":45.558548,"lng":-80.262909,"label":"Start","type":"start"},{"lat":45.548154,"lng":-80.180936,"label":"10"},{"lat":45.555307,"lng":-80.203434,"label":"20"},{"lat":45.56041,"lng":-80.270168,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const layers = {cyclosm, topo, satellite};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [45.548460000000006, -80.223138], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>