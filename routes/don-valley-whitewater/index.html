<!DOCTYPE html>
<html>
<head>
    <title>Don Valley River ‚Äî Whitewater - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar { position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%); color: white; padding: 10px 15px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel { position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 16px 16px 0 0; box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000; max-height: 50vh; transition: transform 0.3s ease; }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) { .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); } .info-panel.collapsed { transform: translateY(0); } .info-panel.collapsed .panel-content { display: none; } .panel-handle { display: none; } }
    </style>
</head>
<body>
    <div class="header-bar"><a href="../../">‚Üê Back</a><a href="../../"><h1>üõ∂ Don Valley River ‚Äî Whitewater</h1></a><span style="width:40px"></span></div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 28 km</p>
            <p><strong>Region:</strong> Toronto</p>
            <p><strong>Date:</strong> May 2024</p>
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[43.795269,-79.380971],[43.795303,-79.381116],[43.795537,-79.381015],[43.795769,-79.381025],[43.795814,-79.381321],[43.79613,-79.381397],[43.796234,-79.381427],[43.796275,-79.381545],[43.796299,-79.381634],[43.796276,-79.381634],[43.796262,-79.381605],[43.79627,-79.381586],[43.796212,-79.381614],[43.795992,-79.381114],[43.795746,-79.38074],[43.795252,-79.380195],[43.795074,-79.380128],[43.794624,-79.380095],[43.794186,-79.380059],[43.794037,-79.37971],[43.793899,-79.37904],[43.793722,-79.378491],[43.793621,-79.378121],[43.793414,-79.377462],[43.793234,-79.377011],[43.792544,-79.376778],[43.792175,-79.377232],[43.791864,-79.377397],[43.791426,-79.377773],[43.791406,-79.378248],[43.791292,-79.378317],[43.791071,-79.378425],[43.790676,-79.378512],[43.790369,-79.378443],[43.790649,-79.378097],[43.790976,-79.377764],[43.791026,-79.377344],[43.79093,-79.377105],[43.790528,-79.376503],[43.790172,-79.376175],[43.789844,-79.375735],[43.789389,-79.375713],[43.788953,-79.375744],[43.788211,-79.376003],[43.787728,-79.376243],[43.787232,-79.376895],[43.78695,-79.377265],[43.786445,-79.37754],[43.785816,-79.37775],[43.785383,-79.377995],[43.785018,-79.377703],[43.784584,-79.37736],[43.784234,-79.377089],[43.783752,-79.376544],[43.78334,-79.376394],[43.782755,-79.376932],[43.782084,-79.377545],[43.781952,-79.377231],[43.781821,-79.376698],[43.781579,-79.375985],[43.781442,-79.375577],[43.78181,-79.375078],[43.782087,-79.374631],[43.782468,-79.373715],[43.78213,-79.372791],[43.781911,-79.372512],[43.781583,-79.372166],[43.781398,-79.371504],[43.781248,-79.371158],[43.781265,-79.371017],[43.781357,-79.370673],[43.78125,-79.370525],[43.781219,-79.370531],[43.780679,-79.370277],[43.779932,-79.370225],[43.779468,-79.3703],[43.778941,-79.370139],[43.778658,-79.370023],[43.778591,-79.370641],[43.778319,-79.370826],[43.777983,-79.370599],[43.777739,-79.370439],[43.777451,-79.370305],[43.777129,-79.36949],[43.77681,-79.369218],[43.776289,-79.369581],[43.776111,-79.369975],[43.775719,-79.370086],[43.775659,-79.36972],[43.775848,-79.369095],[43.776138,-79.368568],[43.775942,-79.368255],[43.775677,-79.367918],[43.775334,-79.367633],[43.775005,-79.367241],[43.775057,-79.366663],[43.775027,-79.366146],[43.774463,-79.36618],[43.773958,-79.366599],[43.773477,-79.366348],[43.773295,-79.365918],[43.772874,-79.365221],[43.77252,-79.364799],[43.771963,-79.364609],[43.771876,-79.364578],[43.771649,-79.364031],[43.771261,-79.363441],[43.770842,-79.362631],[43.770522,-79.361922],[43.770245,-79.361585],[43.769823,-79.361081],[43.76933,-79.36085],[43.76868,-79.360815],[43.768167,-79.360701],[43.767876,-79.360429],[43.767571,-79.36003],[43.767328,-79.359823],[43.766883,-79.359695],[43.766738,-79.359694],[43.766468,-79.359581],[43.765877,-79.359539],[43.765478,-79.358888],[43.765225,-79.358267],[43.764731,-79.357582],[43.764735,-79.35709],[43.764915,-79.356533],[43.764938,-79.35593],[43.764747,-79.355467],[43.764681,-79.355122],[43.764264,-79.354656],[43.763721,-79.354147],[43.763677,-79.35385],[43.763747,-79.353437],[43.763889,-79.352899],[43.763809,-79.352482],[43.76366,-79.352109],[43.763601,-79.351537],[43.763851,-79.351099],[43.764181,-79.351109],[43.764239,-79.350796],[43.764101,-79.350447],[43.763899,-79.350114],[43.763631,-79.349596],[43.763219,-79.349329],[43.762554,-79.34956],[43.761937,-79.349633],[43.761376,-79.349815],[43.7608,-79.349541],[43.760563,-79.349148],[43.760636,-79.34891],[43.760426,-79.348581],[43.760016,-79.348417],[43.759858,-79.347883],[43.759762,-79.347458],[43.759643,-79.34653],[43.759144,-79.346208],[43.758667,-79.346053],[43.758366,-79.345727],[43.758116,-79.345266],[43.757997,-79.344977],[43.757912,-79.344888],[43.757812,-79.344821],[43.757667,-79.344597],[43.756939,-79.344019],[43.756701,-79.343963],[43.756211,-79.343877],[43.755856,-79.343802],[43.755139,-79.343769],[43.754852,-79.344593],[43.754707,-79.345059],[43.754743,-79.345261],[43.754731,-79.345242],[43.754717,-79.345262],[43.754536,-79.345405],[43.754107,-79.345609],[43.753471,-79.34548],[43.753305,-79.345399],[43.752789,-79.345382],[43.752429,-79.345539],[43.751898,-79.346059],[43.751485,-79.346298],[43.751228,-79.345852],[43.751113,-79.345233],[43.751048,-79.34452],[43.751048,-79.343827],[43.750983,-79.343084],[43.750748,-79.342523],[43.750349,-79.342594],[43.750259,-79.342608],[43.750012,-79.342617],[43.74936,-79.342257],[43.748645,-79.34228],[43.747923,-79.34233],[43.747516,-79.342062],[43.747427,-79.341588],[43.74711,-79.340805],[43.746958,-79.340327],[43.746741,-79.339342],[43.746189,-79.339425],[43.745747,-79.339762],[43.745348,-79.339886],[43.744712,-79.34021],[43.743981,-79.339594],[43.743523,-79.339032],[43.743515,-79.33842],[43.743574,-79.338166],[43.743643,-79.337925],[43.743761,-79.336854],[43.743386,-79.336397],[43.743002,-79.336219],[43.742796,-79.336297],[43.7428,-79.336384],[43.742273,-79.336672],[43.741964,-79.336467],[43.7416,-79.336117],[43.740944,-79.33574],[43.740787,-79.335404],[43.740757,-79.334856],[43.740762,-79.334194],[43.740872,-79.333648],[43.740998,-79.333265],[43.741116,-79.333039],[43.741175,-79.332979],[43.741264,-79.33276],[43.741446,-79.332607],[43.741475,-79.3325],[43.741509,-79.33252],[43.741515,-79.332499],[43.741521,-79.33249],[43.741583,-79.332487],[43.741649,-79.332244],[43.741705,-79.331713],[43.741474,-79.330872],[43.741121,-79.330551],[43.740567,-79.330653],[43.740156,-79.330722],[43.739934,-79.330566],[43.739474,-79.330226],[43.7388,-79.330004],[43.738447,-79.330142],[43.738022,-79.330486],[43.737713,-79.330933],[43.737215,-79.331421],[43.736804,-79.331339],[43.736431,-79.330707],[43.735889,-79.330772],[43.735273,-79.331146],[43.734672,-79.330818],[43.734428,-79.330492],[43.734207,-79.329929],[43.733975,-79.329127],[43.734098,-79.328629],[43.734225,-79.328211],[43.733813,-79.327766],[43.733211,-79.327637],[43.73297,-79.327198],[43.732826,-79.326715],[43.732244,-79.32612],[43.732053,-79.325292],[43.73152,-79.324644],[43.731051,-79.324553],[43.730793,-79.324622],[43.730076,-79.324798],[43.729833,-79.324905],[43.729562,-79.324984],[43.729549,-79.324469],[43.729412,-79.323683],[43.729544,-79.322963],[43.729913,-79.322454],[43.730174,-79.322166],[43.730422,-79.321814],[43.730906,-79.321279],[43.731253,-79.320756],[43.731579,-79.320165],[43.731367,-79.319487],[43.731046,-79.319444],[43.730784,-79.319804],[43.730271,-79.320112],[43.729715,-79.320154],[43.729404,-79.319593],[43.729349,-79.318962],[43.729071,-79.318593],[43.728934,-79.318794],[43.728941,-79.318811],[43.728879,-79.318976],[43.728673,-79.319406],[43.72836,-79.32],[43.727969,-79.320333],[43.727827,-79.320917],[43.727583,-79.321503],[43.727469,-79.321811],[43.727389,-79.322323],[43.727228,-79.322928],[43.726996,-79.32315],[43.72667,-79.323081],[43.726288,-79.323014],[43.725896,-79.322629],[43.72548,-79.322199],[43.725328,-79.322231],[43.725133,-79.322294],[43.724483,-79.322554],[43.724109,-79.322695],[43.723652,-79.322966],[43.723266,-79.323187],[43.722753,-79.323268],[43.722054,-79.323494],[43.721967,-79.323877],[43.721761,-79.324765],[43.721672,-79.32497],[43.721566,-79.325243],[43.721305,-79.325846],[43.721273,-79.326611],[43.721131,-79.326756],[43.720796,-79.326684],[43.720537,-79.326281],[43.720464,-79.325712],[43.720462,-79.325323],[43.720506,-79.325018],[43.720575,-79.324598],[43.720611,-79.324244],[43.72028,-79.323473],[43.720119,-79.323176],[43.719949,-79.322847],[43.719424,-79.322554],[43.719048,-79.32282],[43.718937,-79.323313],[43.718716,-79.32369],[43.718399,-79.323845],[43.718194,-79.323881],[43.717768,-79.323848],[43.717265,-79.323611],[43.71673,-79.323409],[43.716449,-79.323076],[43.716282,-79.322538],[43.716061,-79.321785],[43.715964,-79.321216],[43.715956,-79.320673],[43.7159,-79.320267],[43.715604,-79.320085],[43.715041,-79.31991],[43.714708,-79.320036],[43.714616,-79.320511],[43.714568,-79.320737],[43.714313,-79.320946],[43.713914,-79.32058],[43.713476,-79.320286],[43.713212,-79.320714],[43.713126,-79.321034],[43.712931,-79.321173],[43.712638,-79.321465],[43.712296,-79.321523],[43.712328,-79.321236],[43.712364,-79.32066],[43.712371,-79.320261],[43.712628,-79.320022],[43.712482,-79.319245],[43.712066,-79.318977],[43.711547,-79.318541],[43.710983,-79.31883],[43.710689,-79.319283],[43.710507,-79.320116],[43.710303,-79.320738],[43.710181,-79.321311],[43.710246,-79.321829],[43.710243,-79.322293],[43.710194,-79.32311],[43.709984,-79.323626],[43.709765,-79.324157],[43.709542,-79.324739],[43.709044,-79.325036],[43.708589,-79.325386],[43.708228,-79.325931],[43.708163,-79.326617],[43.708072,-79.327303],[43.708056,-79.327488],[43.70802,-79.327859],[43.70786,-79.32831],[43.707668,-79.328591],[43.707386,-79.329042],[43.706883,-79.329641],[43.706439,-79.330101],[43.706262,-79.330568],[43.706331,-79.330973],[43.706252,-79.331338],[43.705887,-79.332101],[43.705521,-79.332587],[43.705115,-79.332931],[43.704782,-79.332858],[43.704309,-79.332933],[43.703704,-79.332968],[43.703292,-79.333201],[43.703048,-79.33368],[43.703013,-79.334034],[43.703107,-79.334685],[43.703149,-79.33498],[43.703162,-79.334738],[43.703105,-79.334565],[43.703131,-79.334573],[43.703174,-79.335165],[43.703116,-79.33548],[43.702891,-79.336198],[43.702708,-79.336501],[43.702464,-79.336941],[43.702053,-79.337403],[43.701722,-79.338115],[43.701432,-79.338736],[43.70106,-79.339343],[43.700563,-79.339768],[43.699849,-79.340612],[43.699383,-79.34143],[43.69903,-79.342696],[43.698794,-79.343201],[43.698227,-79.344255],[43.698246,-79.345203],[43.698685,-79.346205],[43.699087,-79.347272],[43.699672,-79.348038],[43.699941,-79.349008],[43.69987,-79.349547],[43.699647,-79.350269],[43.699214,-79.350625],[43.698731,-79.351227],[43.698481,-79.352152],[43.698533,-79.352975],[43.698122,-79.354019],[43.698036,-79.354908],[43.697322,-79.355667],[43.696598,-79.355984],[43.695879,-79.356402],[43.695314,-79.357032],[43.695191,-79.357788],[43.695398,-79.358353],[43.695533,-79.359253],[43.695312,-79.35989],[43.695032,-79.360277],[43.694623,-79.360956],[43.69401,-79.361837],[43.69334,-79.361606],[43.692709,-79.361012],[43.692347,-79.36043],[43.69176,-79.359894],[43.691408,-79.359906],[43.691296,-79.360044],[43.691306,-79.359937],[43.691317,-79.359946],[43.691315,-79.359965],[43.691303,-79.359915],[43.691165,-79.359945],[43.691151,-79.359979],[43.691149,-79.359986],[43.690919,-79.360096],[43.690703,-79.360269],[43.690454,-79.36034],[43.690086,-79.360593],[43.69002,-79.360577],[43.690288,-79.360492],[43.690711,-79.360347],[43.690848,-79.360207],[43.69091,-79.360112],[43.69091,-79.360105],[43.691118,-79.359992],[43.691204,-79.359923],[43.691184,-79.359934],[43.691136,-79.359917],[43.690739,-79.360136],[43.69037,-79.360416],[43.690153,-79.360529],[43.690095,-79.360556],[43.690098,-79.360602],[43.690146,-79.360665],[43.689863,-79.360889],[43.689234,-79.361255],[43.688739,-79.361653],[43.688396,-79.362296],[43.687675,-79.362542],[43.686992,-79.362186],[43.686449,-79.361898],[43.685822,-79.361604],[43.685143,-79.361682],[43.68448,-79.361959],[43.683923,-79.362503],[43.68325,-79.363136],[43.682887,-79.364095],[43.68251,-79.36492],[43.682099,-79.36553],[43.68157,-79.366199],[43.680839,-79.366227],[43.680427,-79.365742],[43.680223,-79.365256],[43.679803,-79.36481],[43.679249,-79.364078],[43.678669,-79.363602],[43.678049,-79.363494],[43.677723,-79.363705],[43.677385,-79.364123],[43.676819,-79.364851],[43.676162,-79.36433],[43.675653,-79.363715],[43.675051,-79.363006],[43.674378,-79.362784],[43.673469,-79.362989],[43.672895,-79.362355],[43.672686,-79.361357],[43.672159,-79.360673],[43.671777,-79.360307],[43.671519,-79.360238],[43.671497,-79.360254],[43.671495,-79.360272],[43.671168,-79.359872],[43.670566,-79.359627],[43.670046,-79.35911],[43.669682,-79.358404],[43.669005,-79.35769],[43.668796,-79.357528],[43.66851,-79.357355],[43.668067,-79.357239],[43.667739,-79.357188],[43.667254,-79.357092],[43.666876,-79.356937],[43.666005,-79.356621],[43.665621,-79.356523],[43.665061,-79.356383],[43.664369,-79.356142],[43.663845,-79.356019],[43.663401,-79.355879],[43.662774,-79.3557],[43.662483,-79.355613],[43.661826,-79.355464],[43.6616,-79.355331],[43.661085,-79.355166],[43.660591,-79.35505],[43.659876,-79.354814],[43.659556,-79.354719],[43.659046,-79.35457],[43.65826,-79.35442],[43.657961,-79.354269],[43.657382,-79.353758],[43.657041,-79.353475],[43.656714,-79.353107],[43.65645,-79.352675],[43.655843,-79.352059],[43.655676,-79.351803],[43.655238,-79.351329],[43.654806,-79.350924],[43.654265,-79.350371],[43.653951,-79.350108],[43.653755,-79.350044],[43.653744,-79.350126],[43.653717,-79.350353],[43.653753,-79.35062],[43.653725,-79.350835],[43.653696,-79.351281],[43.653723,-79.35167],[43.653718,-79.351791],[43.653541,-79.351894],[43.653503,-79.352028],[43.653509,-79.352027],[43.653529,-79.352439],[43.653219,-79.352574],[43.653,-79.352867],[43.65293,-79.353288],[43.653036,-79.353382],[43.65305,-79.353368],[43.653027,-79.353338],[43.653068,-79.353362],[43.653035,-79.35336],[43.653024,-79.353361],[43.653063,-79.353346],[43.65307,-79.353332],[43.653069,-79.353366],[43.653052,-79.353361],[43.653053,-79.353362],[43.653081,-79.353348]];
        const waypoints = [{"lat":43.795269,"lng":-79.380971,"label":"Start","type":"start"},{"lat":43.743543,"lng":-79.338287,"label":"10"},{"lat":43.699509,"lng":-79.341187,"label":"20"},{"lat":43.653081,"lng":-79.353348,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {cyclosm, topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [43.7246145, -79.3500875], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>