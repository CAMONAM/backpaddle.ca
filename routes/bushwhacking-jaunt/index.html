<!DOCTYPE html>
<html>
<head>
    <title>Canoe Bushwhacking Jaunt - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar {
            position: absolute; top: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%);
            color: white; padding: 10px 15px; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: white; border-radius: 16px 16px 0 0;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000;
            max-height: 50vh; transition: transform 0.3s ease;
        }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) {
            .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); }
            .info-panel.collapsed { transform: translateY(0); }
            .info-panel.collapsed .panel-content { display: none; }
            .panel-handle { display: none; }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <a href="../../">‚Üê Back</a>
        <a href="../../"><h1>üõ∂ Canoe Bushwhacking Jaunt</h1></a>
        <span style="width:40px"></span>
    </div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 47 km</p>
            <p><strong>Region:</strong> Ontario</p>
            <p><strong>Date:</strong> Jul 2022</p>
            
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[45.64538,-80.399052],[45.645364,-80.398581],[45.645569,-80.396953],[45.645612,-80.395493],[45.645617,-80.395411],[45.64573,-80.393492],[45.645982,-80.391396],[45.646234,-80.389544],[45.64649,-80.387771],[45.64647,-80.386227],[45.646587,-80.383421],[45.646599,-80.380939],[45.646388,-80.377889],[45.646088,-80.375495],[45.645715,-80.373453],[45.645086,-80.370517],[45.644752,-80.367837],[45.644506,-80.365073],[45.64446,-80.362294],[45.644477,-80.36006],[45.644489,-80.357361],[45.644438,-80.355356],[45.644157,-80.35285],[45.644144,-80.350847],[45.644077,-80.348484],[45.644126,-80.346788],[45.644035,-80.344291],[45.643856,-80.341764],[45.64392,-80.34003],[45.643685,-80.337953],[45.643613,-80.335201],[45.643356,-80.332598],[45.643146,-80.331094],[45.64284,-80.328533],[45.642525,-80.325434],[45.642283,-80.323849],[45.641861,-80.321011],[45.641188,-80.318063],[45.640625,-80.314975],[45.640405,-80.312231],[45.640513,-80.309667],[45.640526,-80.307191],[45.640687,-80.305055],[45.640719,-80.303228],[45.640803,-80.303236],[45.640787,-80.303261],[45.640142,-80.302321],[45.639442,-80.300621],[45.638761,-80.298835],[45.63827,-80.296966],[45.637751,-80.294892],[45.636874,-80.293381],[45.636793,-80.29122],[45.637154,-80.288808],[45.636747,-80.286538],[45.636614,-80.284478],[45.635971,-80.281294],[45.63519,-80.278352],[45.633817,-80.275786],[45.632295,-80.274141],[45.63117,-80.271865],[45.629974,-80.269521],[45.629329,-80.267996],[45.629081,-80.267782],[45.628951,-80.267055],[45.628535,-80.265881],[45.627883,-80.26454],[45.627317,-80.263119],[45.626573,-80.261805],[45.625815,-80.260712],[45.624405,-80.259382],[45.623496,-80.258074],[45.62275,-80.257073],[45.621987,-80.255741],[45.621472,-80.253792],[45.620962,-80.252088],[45.620381,-80.250292],[45.619654,-80.248275],[45.618807,-80.246009],[45.61807,-80.244556],[45.616988,-80.242013],[45.616442,-80.240254],[45.61615,-80.238976],[45.616127,-80.237655],[45.615663,-80.236869],[45.615572,-80.236183],[45.615127,-80.235398],[45.614962,-80.234407],[45.614921,-80.234256],[45.614935,-80.234259],[45.614934,-80.23425],[45.614937,-80.234241],[45.615032,-80.234236],[45.614942,-80.234239],[45.615102,-80.234068],[45.615133,-80.234101],[45.614835,-80.233003],[45.614596,-80.231727],[45.614626,-80.230698],[45.614535,-80.231342],[45.614724,-80.233019],[45.615028,-80.23404],[45.614986,-80.234376],[45.615071,-80.234142],[45.614782,-80.233458],[45.614779,-80.233043],[45.61456,-80.232055],[45.614651,-80.231305],[45.614571,-80.230621],[45.614559,-80.229738],[45.614498,-80.228789],[45.614263,-80.228777],[45.614278,-80.228829],[45.613882,-80.22908],[45.613264,-80.229078],[45.613195,-80.228936],[45.612627,-80.228218],[45.612191,-80.227127],[45.611934,-80.226573],[45.611867,-80.226482],[45.61173,-80.225291],[45.611466,-80.224125],[45.611428,-80.222489],[45.61101,-80.221233],[45.610585,-80.220237],[45.609862,-80.219951],[45.609888,-80.219903],[45.609206,-80.219818],[45.608981,-80.218715],[45.608538,-80.218329],[45.608462,-80.217644],[45.608454,-80.217523],[45.608435,-80.217704],[45.608453,-80.217648],[45.608378,-80.217436],[45.608173,-80.217168],[45.608098,-80.217149],[45.608022,-80.216802],[45.607975,-80.2168],[45.607939,-80.216802],[45.607605,-80.216046],[45.60756,-80.21601],[45.607416,-80.21445],[45.607652,-80.213661],[45.608304,-80.213793],[45.608812,-80.213435],[45.609187,-80.213512],[45.609059,-80.214369],[45.608571,-80.214169],[45.608778,-80.214724],[45.609194,-80.213999],[45.608875,-80.213232],[45.608298,-80.213807],[45.609095,-80.214627],[45.609238,-80.213896],[45.608583,-80.213477],[45.607593,-80.21342],[45.606571,-80.213209],[45.606725,-80.212614],[45.607454,-80.213288],[45.608114,-80.2129],[45.608787,-80.211947],[45.608969,-80.211442],[45.60906,-80.211039],[45.608914,-80.211438],[45.608924,-80.211478],[45.608916,-80.211456],[45.60905,-80.21109],[45.609986,-80.211146],[45.610209,-80.210938],[45.610154,-80.210909],[45.610176,-80.211001],[45.610424,-80.21121],[45.610458,-80.211333],[45.610515,-80.211359],[45.610964,-80.211445],[45.611542,-80.211855],[45.612002,-80.212924],[45.612063,-80.212865],[45.612043,-80.212889],[45.612129,-80.212964],[45.612183,-80.213194],[45.612605,-80.213421],[45.613003,-80.213412],[45.61326,-80.213271],[45.613335,-80.213103],[45.613395,-80.213084],[45.613385,-80.213077],[45.613441,-80.213075],[45.613639,-80.213206],[45.613062,-80.21331],[45.612715,-80.21337],[45.612616,-80.213413],[45.612649,-80.213516],[45.61303,-80.213396],[45.613397,-80.213368],[45.613827,-80.213276],[45.613819,-80.213228],[45.614101,-80.213287],[45.614768,-80.213241],[45.61523,-80.21321],[45.615602,-80.212517],[45.615756,-80.211487],[45.616289,-80.210907],[45.616149,-80.210048],[45.616158,-80.210027],[45.616142,-80.210031],[45.616208,-80.210089],[45.616243,-80.210073],[45.616393,-80.209535],[45.616311,-80.210034],[45.616235,-80.210017],[45.616172,-80.210041],[45.616188,-80.210038],[45.616416,-80.209484],[45.616361,-80.209547],[45.616565,-80.208895],[45.616701,-80.208411],[45.616892,-80.20794],[45.617418,-80.207219],[45.618166,-80.207031],[45.618522,-80.206758],[45.619115,-80.206255],[45.619463,-80.205413],[45.619922,-80.204513],[45.619887,-80.203883],[45.620101,-80.203555],[45.620312,-80.203342],[45.620885,-80.203013],[45.621259,-80.202605],[45.620795,-80.202448],[45.621,-80.202314],[45.621484,-80.202028],[45.622258,-80.201955],[45.622748,-80.202219],[45.623302,-80.202051],[45.624022,-80.201736],[45.624418,-80.201402],[45.624042,-80.201509],[45.623585,-80.201953],[45.622953,-80.201957],[45.622315,-80.201874],[45.621764,-80.202065],[45.621439,-80.202658],[45.620992,-80.202619],[45.620548,-80.203075],[45.620093,-80.203547],[45.619818,-80.20391],[45.619972,-80.203466],[45.620458,-80.203292],[45.620439,-80.203614],[45.620941,-80.203016],[45.621287,-80.202787],[45.621295,-80.202706],[45.62171,-80.202595],[45.621929,-80.201934],[45.62294,-80.202004],[45.62361,-80.202053],[45.624064,-80.201583],[45.624369,-80.201396],[45.624461,-80.201346],[45.624602,-80.201435],[45.625174,-80.201705],[45.625612,-80.201974],[45.625596,-80.202854],[45.624658,-80.204439],[45.624022,-80.205555],[45.624744,-80.206427],[45.625618,-80.205362],[45.625563,-80.204364],[45.62596,-80.204231],[45.626036,-80.20312],[45.626669,-80.201625],[45.627586,-80.200266],[45.627487,-80.198827],[45.626816,-80.197578],[45.62642,-80.196804],[45.625678,-80.19643],[45.625417,-80.196542],[45.626147,-80.196516],[45.626733,-80.19739],[45.62747,-80.198773],[45.627473,-80.200278],[45.626444,-80.201653],[45.626024,-80.201909],[45.625661,-80.201618],[45.625743,-80.201809],[45.625833,-80.201983],[45.626027,-80.201991],[45.62699,-80.20097],[45.627641,-80.199949],[45.627511,-80.199805],[45.627369,-80.199679],[45.627543,-80.199805],[45.627646,-80.199854],[45.627636,-80.199845],[45.627524,-80.199759],[45.627507,-80.199725],[45.627504,-80.199822],[45.627516,-80.199708],[45.627631,-80.199895],[45.627508,-80.199712],[45.627038,-80.201007],[45.625756,-80.202066],[45.624852,-80.20144],[45.624409,-80.201327],[45.624415,-80.201325],[45.624138,-80.201467],[45.623897,-80.201714],[45.623312,-80.201975],[45.623006,-80.202001],[45.622223,-80.201819],[45.621639,-80.202205],[45.621407,-80.202726],[45.620858,-80.202709],[45.62038,-80.20314],[45.620049,-80.203594],[45.619904,-80.204037],[45.619788,-80.204965],[45.619229,-80.205459],[45.618749,-80.206315],[45.618045,-80.206836],[45.617188,-80.207204],[45.616838,-80.207811],[45.616475,-80.20839],[45.616357,-80.209259],[45.616434,-80.21041],[45.616804,-80.211418],[45.617016,-80.212604],[45.617372,-80.21336],[45.617644,-80.213944],[45.616893,-80.214543],[45.616322,-80.214614],[45.61586,-80.214916],[45.615403,-80.215825],[45.614868,-80.216559],[45.614202,-80.21737],[45.614214,-80.218011],[45.61417,-80.219359],[45.614304,-80.220684],[45.614389,-80.221731],[45.614439,-80.222723],[45.614656,-80.223681],[45.614525,-80.224839],[45.614353,-80.226129],[45.614389,-80.22734],[45.614362,-80.228519],[45.614478,-80.229555],[45.614585,-80.231135],[45.614573,-80.232274],[45.614823,-80.233591],[45.615083,-80.2343],[45.614982,-80.234267],[45.614953,-80.234329],[45.615022,-80.234937],[45.615113,-80.235554],[45.615936,-80.2369],[45.616017,-80.238294],[45.616092,-80.239645],[45.616985,-80.240622],[45.617667,-80.241948],[45.61859,-80.244427],[45.619346,-80.246513],[45.61995,-80.248313],[45.620617,-80.249939],[45.621477,-80.251767],[45.622214,-80.253095],[45.622959,-80.254368],[45.623968,-80.256222],[45.624775,-80.257836],[45.625577,-80.259305],[45.626316,-80.260951],[45.627089,-80.262355],[45.627321,-80.262977],[45.627741,-80.264226],[45.628415,-80.265575],[45.628942,-80.266754],[45.629565,-80.26845],[45.630371,-80.270635],[45.631236,-80.272006],[45.631731,-80.272527],[45.631843,-80.272952],[45.632164,-80.274136],[45.633396,-80.275397],[45.633995,-80.276184],[45.634685,-80.27701],[45.634644,-80.278448],[45.634382,-80.279161],[45.634692,-80.279643],[45.635139,-80.280755],[45.635428,-80.282214],[45.635686,-80.283797],[45.636045,-80.285593],[45.636574,-80.286733],[45.636541,-80.286812],[45.636441,-80.286784],[45.636437,-80.286777],[45.636437,-80.286777],[45.636481,-80.286767],[45.636449,-80.286722],[45.636417,-80.286676],[45.636385,-80.286631],[45.636352,-80.286585],[45.63632,-80.28654],[45.636288,-80.286495],[45.636256,-80.286449],[45.636292,-80.286531],[45.636466,-80.286883],[45.636579,-80.286988],[45.636548,-80.28694],[45.636492,-80.286854],[45.63651,-80.286912],[45.636436,-80.286879],[45.63653,-80.286953],[45.636501,-80.286902],[45.63653,-80.28687],[45.636451,-80.286728],[45.63651,-80.286921],[45.636545,-80.286834],[45.6365,-80.286998],[45.636501,-80.287004],[45.636505,-80.286988],[45.636586,-80.286909],[45.636549,-80.286926],[45.636582,-80.28688],[45.636566,-80.28686],[45.63655,-80.286885],[45.636545,-80.286835],[45.636518,-80.286792],[45.636998,-80.287085],[45.637098,-80.287735],[45.637024,-80.288145],[45.637081,-80.288609],[45.637061,-80.288648],[45.637032,-80.288092],[45.637157,-80.287726],[45.637084,-80.287569],[45.637213,-80.288591],[45.637183,-80.290077],[45.637371,-80.292007],[45.637613,-80.293635],[45.637744,-80.294708],[45.638173,-80.296306],[45.63844,-80.298014],[45.63883,-80.29965],[45.639209,-80.301564],[45.639501,-80.303421],[45.63973,-80.305756],[45.639889,-80.30754],[45.640079,-80.309168],[45.640267,-80.310835],[45.640513,-80.312132],[45.640664,-80.314072],[45.640953,-80.315188],[45.641133,-80.316413],[45.641588,-80.31827],[45.641965,-80.319322],[45.642449,-80.321097],[45.642872,-80.32284],[45.643144,-80.323606],[45.64322,-80.325921],[45.64337,-80.3272],[45.643503,-80.327845],[45.643704,-80.32885],[45.643739,-80.330557],[45.643926,-80.331967],[45.644192,-80.334111],[45.643771,-80.336064],[45.64395,-80.337517],[45.644254,-80.337831],[45.644161,-80.337851],[45.644244,-80.33932],[45.644257,-80.340456],[45.644496,-80.341776],[45.645121,-80.342893],[45.645594,-80.344807],[45.645739,-80.346761],[45.645661,-80.34835],[45.645711,-80.349609],[45.645788,-80.351745],[45.645873,-80.352714],[45.645794,-80.353554],[45.645573,-80.354127],[45.64554,-80.35615],[45.645522,-80.357203],[45.645068,-80.359471],[45.645079,-80.361188],[45.645168,-80.362885],[45.645475,-80.36442],[45.645581,-80.365853],[45.645611,-80.367606],[45.645648,-80.36962],[45.645718,-80.37088],[45.645898,-80.372444],[45.646165,-80.374691],[45.646295,-80.376002],[45.646401,-80.377364],[45.646629,-80.379132],[45.647013,-80.381108],[45.646836,-80.380805],[45.646579,-80.379917],[45.64676,-80.379316],[45.64654,-80.378696],[45.646278,-80.377955],[45.646233,-80.377167],[45.646471,-80.377644],[45.646639,-80.378937],[45.646737,-80.38059],[45.647092,-80.382438],[45.647184,-80.384503],[45.64712,-80.386612],[45.646872,-80.388403],[45.646744,-80.390036],[45.646443,-80.392409],[45.646178,-80.394715],[45.646005,-80.395129],[45.645982,-80.394564],[45.646027,-80.395295],[45.645868,-80.396656],[45.64585,-80.397868],[45.645409,-80.399412],[45.644793,-80.400114],[45.644258,-80.400575]];
        const waypoints = [{"lat":45.64538,"lng":-80.399052,"label":"Start","type":"start"},{"lat":45.614263,"lng":-80.228777,"label":"10"},{"lat":45.619181,"lng":-80.206225,"label":"20"},{"lat":45.615786,"lng":-80.21499,"label":"30"},{"lat":45.638893,"lng":-80.299964,"label":"40"},{"lat":45.644258,"lng":-80.400575,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {cyclosm, topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [45.626877500000006, -80.29850250000001], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>