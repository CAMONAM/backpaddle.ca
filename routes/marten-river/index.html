<!DOCTYPE html>
<html>
<head>
    <title>Marten River - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar {
            position: absolute; top: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%);
            color: white; padding: 10px 15px; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: white; border-radius: 16px 16px 0 0;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000;
            max-height: 50vh; transition: transform 0.3s ease;
        }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) {
            .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); }
            .info-panel.collapsed { transform: translateY(0); }
            .info-panel.collapsed .panel-content { display: none; }
            .panel-handle { display: none; }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <a href="../../">‚Üê Back</a>
        <a href="../../"><h1>üõ∂ Marten River</h1></a>
        <span style="width:40px"></span>
    </div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 51 km</p>
            <p><strong>Region:</strong> Temagami</p>
            <p><strong>Date:</strong> Sep 2022</p>
            
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[46.730662,-79.803727],[46.730308,-79.803762],[46.729402,-79.804063],[46.728741,-79.804224],[46.727839,-79.804322],[46.727008,-79.804473],[46.725917,-79.804427],[46.724949,-79.804511],[46.724188,-79.804781],[46.723203,-79.804807],[46.721671,-79.804966],[46.720464,-79.805177],[46.71921,-79.805253],[46.718392,-79.80508],[46.718611,-79.80506],[46.718311,-79.804453],[46.718697,-79.80342],[46.720092,-79.801691],[46.72145,-79.799964],[46.722006,-79.798317],[46.721634,-79.796343],[46.721746,-79.794268],[46.721864,-79.792878],[46.721574,-79.791613],[46.720913,-79.790323],[46.720042,-79.788927],[46.719106,-79.787768],[46.719087,-79.787237],[46.718273,-79.786412],[46.717175,-79.785348],[46.716422,-79.78429],[46.715792,-79.783223],[46.715237,-79.782202],[46.714392,-79.781058],[46.713333,-79.779893],[46.712495,-79.778908],[46.711407,-79.777721],[46.710637,-79.776615],[46.709691,-79.775308],[46.708487,-79.773996],[46.707647,-79.773064],[46.706647,-79.772074],[46.705528,-79.770783],[46.704568,-79.769538],[46.703839,-79.768474],[46.703022,-79.767593],[46.702465,-79.767026],[46.701968,-79.766382],[46.701365,-79.765859],[46.700603,-79.764882],[46.699823,-79.76281],[46.699703,-79.761446],[46.699596,-79.759149],[46.699437,-79.75697],[46.699355,-79.755297],[46.699386,-79.753485],[46.699269,-79.751841],[46.699058,-79.750542],[46.698612,-79.749196],[46.69872,-79.747786],[46.699071,-79.74706],[46.69943,-79.746723],[46.69993,-79.745962],[46.700267,-79.744378],[46.700705,-79.742709],[46.701037,-79.74113],[46.70122,-79.739644],[46.701551,-79.737528],[46.701716,-79.735591],[46.701918,-79.733794],[46.70225,-79.732236],[46.702438,-79.730586],[46.702595,-79.728463],[46.702676,-79.726959],[46.702575,-79.725137],[46.702603,-79.72318],[46.702537,-79.720699],[46.702212,-79.71851],[46.701688,-79.715963],[46.701225,-79.714042],[46.700622,-79.711571],[46.700756,-79.709114],[46.701315,-79.707294],[46.700333,-79.706204],[46.699337,-79.705599],[46.6991,-79.705157],[46.698876,-79.705369],[46.698211,-79.704804],[46.6975,-79.704137],[46.696685,-79.703697],[46.695953,-79.703329],[46.695211,-79.702686],[46.694774,-79.702258],[46.69434,-79.701061],[46.693993,-79.700123],[46.693948,-79.699021],[46.693819,-79.69711],[46.693607,-79.695534],[46.693312,-79.693285],[46.692886,-79.691974],[46.692403,-79.69029],[46.691945,-79.689119],[46.691551,-79.688372],[46.691267,-79.687201],[46.69088,-79.686192],[46.690729,-79.686158],[46.690439,-79.686214],[46.690515,-79.6862],[46.690818,-79.686124],[46.691365,-79.684552],[46.691973,-79.683084],[46.692545,-79.68081],[46.693084,-79.678894],[46.693814,-79.675825],[46.694365,-79.672404],[46.694657,-79.669844],[46.694862,-79.668187],[46.695075,-79.665497],[46.695295,-79.663994],[46.695519,-79.662646],[46.695245,-79.66095],[46.695179,-79.660562],[46.695165,-79.660559],[46.695145,-79.660562],[46.695093,-79.660614],[46.695396,-79.661292],[46.695605,-79.662458],[46.695707,-79.663147],[46.696269,-79.665255],[46.696597,-79.666728],[46.696922,-79.668098],[46.697737,-79.669627],[46.698256,-79.670189],[46.698478,-79.67099],[46.698731,-79.671726],[46.698899,-79.672262],[46.698712,-79.67339],[46.69902,-79.674019],[46.69976,-79.674195],[46.701524,-79.674174],[46.703314,-79.673886],[46.704918,-79.673915],[46.706515,-79.674244],[46.708447,-79.674385],[46.709534,-79.674128],[46.710985,-79.673731],[46.712689,-79.672916],[46.714172,-79.671985],[46.714896,-79.670884],[46.715798,-79.669134],[46.716352,-79.667933],[46.716755,-79.666534],[46.716691,-79.665319],[46.716928,-79.664463],[46.717517,-79.66213],[46.717941,-79.65954],[46.718323,-79.656915],[46.718744,-79.655092],[46.718536,-79.653558],[46.718209,-79.653485],[46.718317,-79.65358],[46.718118,-79.653428],[46.718463,-79.65364],[46.718474,-79.653574],[46.71986,-79.653766],[46.72103,-79.652948],[46.721177,-79.652667],[46.721149,-79.652705],[46.720317,-79.653466],[46.719405,-79.653916],[46.71866,-79.653769],[46.718232,-79.653483],[46.718156,-79.653387],[46.722589,-79.652346],[46.723895,-79.651811],[46.724907,-79.651652],[46.725774,-79.651475],[46.727068,-79.651119],[46.7281,-79.650622],[46.729225,-79.649843],[46.729961,-79.649276],[46.730776,-79.649094],[46.731529,-79.649137],[46.7326,-79.649506],[46.733633,-79.649482],[46.734793,-79.649078],[46.735205,-79.648739],[46.735804,-79.648252],[46.736709,-79.647796],[46.737605,-79.647434],[46.737908,-79.646974],[46.738133,-79.64656],[46.738215,-79.645595],[46.738359,-79.644895],[46.738662,-79.644252],[46.739254,-79.643511],[46.739341,-79.642506],[46.739737,-79.641534],[46.739723,-79.640849],[46.739225,-79.640567],[46.739153,-79.64047],[46.73913,-79.640474],[46.739129,-79.640468],[46.739141,-79.640133],[46.739619,-79.63938],[46.7395,-79.638423],[46.73941,-79.636761],[46.739375,-79.635426],[46.739462,-79.63475],[46.739763,-79.633647],[46.740175,-79.632278],[46.740215,-79.630666],[46.740095,-79.629752],[46.740114,-79.629775],[46.740046,-79.629827],[46.740023,-79.629866],[46.740009,-79.629897],[46.740022,-79.62988],[46.740037,-79.629934],[46.74002,-79.629928],[46.740002,-79.629934],[46.740048,-79.629843],[46.740041,-79.629864],[46.740035,-79.629867],[46.740031,-79.62987],[46.74003,-79.629869],[46.740077,-79.6298],[46.739996,-79.62989],[46.740114,-79.629726],[46.74053,-79.628214],[46.740729,-79.626302],[46.740684,-79.624657],[46.740711,-79.622783],[46.740515,-79.621565],[46.740258,-79.620604],[46.740111,-79.619984],[46.739662,-79.619597],[46.739107,-79.618984],[46.73878,-79.618567],[46.738654,-79.61816],[46.73905,-79.616935],[46.739311,-79.61611],[46.739553,-79.615017],[46.740055,-79.61366],[46.740602,-79.612854],[46.741169,-79.612103],[46.741313,-79.61224],[46.741717,-79.611103],[46.742376,-79.610519],[46.743018,-79.609954],[46.743565,-79.610095],[46.743577,-79.609724],[46.74364,-79.609638],[46.743633,-79.609674],[46.743623,-79.609676],[46.74362,-79.609681],[46.743615,-79.609686],[46.743601,-79.609674],[46.743598,-79.609677],[46.743655,-79.609655],[46.74357,-79.609732],[46.743565,-79.609855],[46.743463,-79.611453],[46.743311,-79.613071],[46.743014,-79.614621],[46.742677,-79.61761],[46.743126,-79.618666],[46.743702,-79.619454],[46.742936,-79.620793],[46.742311,-79.622502],[46.742202,-79.623419],[46.742112,-79.624665],[46.742014,-79.62561],[46.741824,-79.626815],[46.741479,-79.628198],[46.741159,-79.629501],[46.740731,-79.630892],[46.740282,-79.632348],[46.739923,-79.63334],[46.739441,-79.634407],[46.739454,-79.634725],[46.739356,-79.635562],[46.73948,-79.638051],[46.739485,-79.639762],[46.739306,-79.640672],[46.73964,-79.641573],[46.739184,-79.643288],[46.738562,-79.644462],[46.737898,-79.646201],[46.736956,-79.647703],[46.735129,-79.648716],[46.733942,-79.649378],[46.731985,-79.649816],[46.730175,-79.650043],[46.72877,-79.650467],[46.727906,-79.650807],[46.72664,-79.651279],[46.725261,-79.651728],[46.72352,-79.652446],[46.72174,-79.653214],[46.720509,-79.653627],[46.719146,-79.653951],[46.718502,-79.653564],[46.718496,-79.653562],[46.718145,-79.653391],[46.718484,-79.65362],[46.718532,-79.653529],[46.718456,-79.653509],[46.718414,-79.653521],[46.718502,-79.653506],[46.718236,-79.653397],[46.713573,-79.64739],[46.713098,-79.647217],[46.712917,-79.647298],[46.712849,-79.647287],[46.71285,-79.647282],[46.712881,-79.647397],[46.712836,-79.647227],[46.712827,-79.647208],[46.713056,-79.646986],[46.713081,-79.646888],[46.713716,-79.646018],[46.714008,-79.645618],[46.713804,-79.645861],[46.713755,-79.645841],[46.714259,-79.645649],[46.715394,-79.645573],[46.715434,-79.645477],[46.715282,-79.643634],[46.715091,-79.643294],[46.714742,-79.643013],[46.714055,-79.642666],[46.713614,-79.642415],[46.713716,-79.642648],[46.713271,-79.642727],[46.712773,-79.642615],[46.712541,-79.64304],[46.712292,-79.643231],[46.712151,-79.643339],[46.712116,-79.643422],[46.711982,-79.643543],[46.711752,-79.643673],[46.711536,-79.643841],[46.711249,-79.644045],[46.710337,-79.645427],[46.71055,-79.645948],[46.710484,-79.646226],[46.710854,-79.647169],[46.710515,-79.64774],[46.71086,-79.648121],[46.711616,-79.647855],[46.712079,-79.6476],[46.712551,-79.647327],[46.712558,-79.647576],[46.712896,-79.647278],[46.712901,-79.647211],[46.712869,-79.647259],[46.712896,-79.64729],[46.712874,-79.64731],[46.712894,-79.647285],[46.712892,-79.647291],[46.712887,-79.647293],[46.712888,-79.647295],[46.712899,-79.647293],[46.712914,-79.647288],[46.712926,-79.647286],[46.712934,-79.647283],[46.71294,-79.647281],[46.712942,-79.647278],[46.712949,-79.647276],[46.712949,-79.647274],[46.712941,-79.647274],[46.712934,-79.647272],[46.712846,-79.647221],[46.712888,-79.647262],[46.712827,-79.647249],[46.712842,-79.647229],[46.712911,-79.647257],[46.712912,-79.64726],[46.712917,-79.647262],[46.712916,-79.647265],[46.713564,-79.647576],[46.714095,-79.647899],[46.714224,-79.648555],[46.71444,-79.649257],[46.714723,-79.650071],[46.714976,-79.650821],[46.715373,-79.651598],[46.715931,-79.652143],[46.716205,-79.652707],[46.716525,-79.653667],[46.716938,-79.654026],[46.717577,-79.653666],[46.718117,-79.653407],[46.718107,-79.653434],[46.718106,-79.653439],[46.718112,-79.653437],[46.717963,-79.653567],[46.718294,-79.653391],[46.718106,-79.653441],[46.718122,-79.653487],[46.718361,-79.653619],[46.718484,-79.65364],[46.718459,-79.65368],[46.718576,-79.653687],[46.718486,-79.653609],[46.718511,-79.653556],[46.718483,-79.653521],[46.718463,-79.653496],[46.718561,-79.653481],[46.718529,-79.653505],[46.718468,-79.653535],[46.718196,-79.653366],[46.717833,-79.657002],[46.717707,-79.659018],[46.717576,-79.661321],[46.717385,-79.663911],[46.716919,-79.666017],[46.715927,-79.668423],[46.71518,-79.670457],[46.714427,-79.671632],[46.712937,-79.67299],[46.711756,-79.673889],[46.710426,-79.674778],[46.70894,-79.675906],[46.70731,-79.6771],[46.705513,-79.678749],[46.704258,-79.679962],[46.70281,-79.681579],[46.702164,-79.682921],[46.701409,-79.685475],[46.700577,-79.688021],[46.699902,-79.690402],[46.699186,-79.693003],[46.698839,-79.695075],[46.698636,-79.696081],[46.69841,-79.698534],[46.69829,-79.701572],[46.698367,-79.703448],[46.698551,-79.705007],[46.698905,-79.70641],[46.699586,-79.707901],[46.700088,-79.709357],[46.700521,-79.711424],[46.700835,-79.712264],[46.701022,-79.713437],[46.701605,-79.714999],[46.701952,-79.716917],[46.702448,-79.719182],[46.702448,-79.721521],[46.702493,-79.723682],[46.702396,-79.726275],[46.702147,-79.72857],[46.701641,-79.731688],[46.701508,-79.734262],[46.701211,-79.736354],[46.700982,-79.738674],[46.701064,-79.740297],[46.700712,-79.741731],[46.699831,-79.743755],[46.699074,-79.745433],[46.698593,-79.746656],[46.698293,-79.748274],[46.698816,-79.750303],[46.699225,-79.752224],[46.699239,-79.754575],[46.699523,-79.757357],[46.699568,-79.759699],[46.699846,-79.762166],[46.700268,-79.764001],[46.701419,-79.765793],[46.702734,-79.767135],[46.704003,-79.768434],[46.705487,-79.770443],[46.706587,-79.772206],[46.707148,-79.77375],[46.707879,-79.7751],[46.709024,-79.776373],[46.710541,-79.777709],[46.712165,-79.779454],[46.713359,-79.780721],[46.714602,-79.782335],[46.715412,-79.783175],[46.716452,-79.784452],[46.718036,-79.786636],[46.719216,-79.788124],[46.71997,-79.78919],[46.720987,-79.790926],[46.721709,-79.793798],[46.721433,-79.796141],[46.721934,-79.798458],[46.721378,-79.799849],[46.720147,-79.801571],[46.719015,-79.803011],[46.718319,-79.804771],[46.719224,-79.805384],[46.720481,-79.805539],[46.721639,-79.805499],[46.723186,-79.805379],[46.724127,-79.805369],[46.725628,-79.805229],[46.727469,-79.805009],[46.729344,-79.804333],[46.730787,-79.803686],[46.730841,-79.803684],[46.730836,-79.80368]];
        const waypoints = [{"lat":46.730662,"lng":-79.803727,"label":"Start","type":"start"},{"lat":46.693026,"lng":-79.69225,"label":"10"},{"lat":46.739886,"lng":-79.640949,"label":"20"},{"lat":46.725857,"lng":-79.651518,"label":"30"},{"lat":46.718113,"lng":-79.653438,"label":"40"},{"lat":46.71843,"lng":-79.805011,"label":"50"},{"lat":46.730836,"lng":-79.80368,"label":"End","type":"end"}];
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [46.7170705, -79.7075885], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>