<!DOCTYPE html>
<html>
<head>
    <title>Tilden Lake - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar { position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%); color: white; padding: 10px 15px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel { position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 16px 16px 0 0; box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000; max-height: 50vh; transition: transform 0.3s ease; }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) { .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); } .info-panel.collapsed { transform: translateY(0); } .info-panel.collapsed .panel-content { display: none; } .panel-handle { display: none; } }
    </style>
</head>
<body>
    <div class="header-bar"><a href="../../">‚Üê Back</a><a href="../../"><h1>üõ∂ Tilden Lake</h1></a><span style="width:40px"></span></div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 28 km</p>
            <p><strong>Region:</strong> Ontario</p>
            <p><strong>Date:</strong> Jun-Jul 2024</p>
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[46.593136,-79.633703],[46.593722,-79.633366],[46.594242,-79.633068],[46.594904,-79.632861],[46.595897,-79.632487],[46.596885,-79.632017],[46.59768,-79.631819],[46.598241,-79.631616],[46.598981,-79.631441],[46.600059,-79.631007],[46.600571,-79.630783],[46.601245,-79.630641],[46.601951,-79.63059],[46.602478,-79.630478],[46.603294,-79.630265],[46.604177,-79.629882],[46.604968,-79.629514],[46.605892,-79.629205],[46.606762,-79.628923],[46.607221,-79.628825],[46.607657,-79.628739],[46.608395,-79.628508],[46.609408,-79.628194],[46.610054,-79.627865],[46.61102,-79.627443],[46.611463,-79.627185],[46.612016,-79.626944],[46.613358,-79.626499],[46.614097,-79.626228],[46.614959,-79.626082],[46.615884,-79.625968],[46.61653,-79.625765],[46.617108,-79.625408],[46.617378,-79.624518],[46.618031,-79.623907],[46.618922,-79.623215],[46.619575,-79.622581],[46.620221,-79.621569],[46.620881,-79.621545],[46.621658,-79.620937],[46.621651,-79.620809],[46.621647,-79.620812],[46.621642,-79.620817],[46.621655,-79.620775],[46.621679,-79.620786],[46.621508,-79.620376],[46.621546,-79.620153],[46.621483,-79.619798],[46.621355,-79.619059],[46.621433,-79.618422],[46.621372,-79.6178],[46.621491,-79.617332],[46.62148,-79.616947],[46.621414,-79.616457],[46.621502,-79.615842],[46.621875,-79.615448],[46.622248,-79.615421],[46.622456,-79.615329],[46.62238,-79.615361],[46.621989,-79.615137],[46.621722,-79.615563],[46.621537,-79.615704],[46.621399,-79.616483],[46.621457,-79.617354],[46.621413,-79.618192],[46.621265,-79.618803],[46.621383,-79.619513],[46.621494,-79.620046],[46.621471,-79.620498],[46.621601,-79.62085],[46.621582,-79.620838],[46.621514,-79.620482],[46.621548,-79.620091],[46.621434,-79.619422],[46.621369,-79.618691],[46.621404,-79.618153],[46.621447,-79.617587],[46.621484,-79.617264],[46.621451,-79.616649],[46.62143,-79.616204],[46.621635,-79.615698],[46.621949,-79.615331],[46.622063,-79.615147],[46.62224,-79.615414],[46.622473,-79.615404],[46.623282,-79.614734],[46.623993,-79.614257],[46.624719,-79.614378],[46.625625,-79.614314],[46.625996,-79.614333],[46.626799,-79.61438],[46.627586,-79.614369],[46.628397,-79.614377],[46.629255,-79.614286],[46.629971,-79.614154],[46.630688,-79.614022],[46.631199,-79.613955],[46.631505,-79.613859],[46.632319,-79.613995],[46.633113,-79.614023],[46.634018,-79.613881],[46.6349,-79.613697],[46.635728,-79.61371],[46.636541,-79.613624],[46.637062,-79.613575],[46.637647,-79.613546],[46.638368,-79.613494],[46.63902,-79.613485],[46.639585,-79.613435],[46.640557,-79.613337],[46.640941,-79.613277],[46.641518,-79.613113],[46.642122,-79.613379],[46.642347,-79.614102],[46.642137,-79.614601],[46.642204,-79.615148],[46.64257,-79.615899],[46.642905,-79.616287],[46.6431,-79.616693],[46.64336,-79.617476],[46.643571,-79.618056],[46.644007,-79.618677],[46.644192,-79.618965],[46.644506,-79.619321],[46.644843,-79.619662],[46.64548,-79.61999],[46.645835,-79.620318],[46.646076,-79.620638],[46.646304,-79.621002],[46.646628,-79.621934],[46.646652,-79.623194],[46.646306,-79.624212],[46.645711,-79.624913],[46.645476,-79.625439],[46.645299,-79.626046],[46.645214,-79.626597],[46.645089,-79.627092],[46.644958,-79.627813],[46.644894,-79.628509],[46.645076,-79.629185],[46.645481,-79.630065],[46.646158,-79.631002],[46.646521,-79.631337],[46.646994,-79.631885],[46.647577,-79.632274],[46.648114,-79.632638],[46.648558,-79.632985],[46.64909,-79.633287],[46.649873,-79.633526],[46.650368,-79.633978],[46.651132,-79.634672],[46.651435,-79.634898],[46.651829,-79.63529],[46.652416,-79.635843],[46.652867,-79.636344],[46.653174,-79.63667],[46.653807,-79.63733],[46.65466,-79.638079],[46.655092,-79.638412],[46.655853,-79.638905],[46.656183,-79.639106],[46.656407,-79.639262],[46.656777,-79.639546],[46.657181,-79.639849],[46.657898,-79.639968],[46.65829,-79.640102],[46.658664,-79.640226],[46.659302,-79.640416],[46.659976,-79.640403],[46.660606,-79.640207],[46.66117,-79.639944],[46.661608,-79.639455],[46.661965,-79.638766],[46.662214,-79.638157],[46.66252,-79.637312],[46.662793,-79.636542],[46.662955,-79.635873],[46.662953,-79.635157],[46.662938,-79.634457],[46.662889,-79.633222],[46.66294,-79.632609],[46.662982,-79.631953],[46.663039,-79.631265],[46.663084,-79.630308],[46.663132,-79.629163],[46.663128,-79.628131],[46.663133,-79.627417],[46.663129,-79.626574],[46.662947,-79.625516],[46.662669,-79.624056],[46.662473,-79.622908],[46.662215,-79.621847],[46.661963,-79.621054],[46.66173,-79.62013],[46.661514,-79.619434],[46.661296,-79.61877],[46.661005,-79.617831],[46.660709,-79.616874],[46.660281,-79.615551],[46.659974,-79.614403],[46.659746,-79.613586],[46.659369,-79.612233],[46.659076,-79.611088],[46.65873,-79.609893],[46.658602,-79.609329],[46.658276,-79.608237],[46.657991,-79.607163],[46.657732,-79.605892],[46.657569,-79.605212],[46.657348,-79.604106],[46.657315,-79.603729],[46.657248,-79.603669],[46.657237,-79.603656],[46.657293,-79.603742],[46.657255,-79.603664],[46.657217,-79.603655],[46.657188,-79.603692],[46.657218,-79.603723],[46.657204,-79.603674],[46.657213,-79.603675],[46.657204,-79.603632],[46.657246,-79.603624],[46.657258,-79.603668],[46.657242,-79.60369],[46.657208,-79.603678],[46.657201,-79.603671],[46.657161,-79.603687],[46.65717,-79.603675],[46.657163,-79.603667],[46.657172,-79.603665],[46.657195,-79.60366],[46.657244,-79.603648],[46.65722,-79.603643],[46.657227,-79.603645],[46.657208,-79.603661],[46.657149,-79.603628],[46.657253,-79.603708],[46.657194,-79.603669],[46.657221,-79.603647],[46.657265,-79.603647],[46.657253,-79.603669],[46.657187,-79.603643],[46.657213,-79.603742],[46.657198,-79.60373],[46.657268,-79.603668],[46.65721,-79.603756],[46.657151,-79.603621],[46.657154,-79.603666],[46.657215,-79.603741],[46.65725,-79.603743],[46.657201,-79.603728],[46.657191,-79.603724],[46.659205,-79.612223],[46.659519,-79.61323],[46.659801,-79.614171],[46.660121,-79.615199],[46.660446,-79.616204],[46.660882,-79.617653],[46.66111,-79.618503],[46.661431,-79.619472],[46.661773,-79.620686],[46.662083,-79.62179],[46.662299,-79.622542],[46.662457,-79.623266],[46.662629,-79.623932],[46.662818,-79.624801],[46.663087,-79.626096],[46.663209,-79.627343],[46.663123,-79.628675],[46.663114,-79.629497],[46.663095,-79.630704],[46.663114,-79.631627],[46.663132,-79.632587],[46.663111,-79.633877],[46.663061,-79.634887],[46.662993,-79.636058],[46.662768,-79.63679],[46.662446,-79.637632],[46.661997,-79.638668],[46.661585,-79.639578],[46.661329,-79.639839],[46.660813,-79.640047],[46.66013,-79.640236],[46.659358,-79.640232],[46.658481,-79.640087],[46.65797,-79.639877],[46.657519,-79.63974],[46.657008,-79.639471],[46.656462,-79.639127],[46.655617,-79.638548],[46.655235,-79.638269],[46.654748,-79.637928],[46.654256,-79.63747],[46.653837,-79.637114],[46.653542,-79.636818],[46.653047,-79.636314],[46.652685,-79.635962],[46.652286,-79.635588],[46.651924,-79.635297],[46.65154,-79.634854],[46.650873,-79.634284],[46.65019,-79.633701],[46.649691,-79.633482],[46.649265,-79.633288],[46.648849,-79.633113],[46.648524,-79.632864],[46.64814,-79.632624],[46.647689,-79.632353],[46.647234,-79.631963],[46.646814,-79.631501],[46.646336,-79.630956],[46.646023,-79.630473],[46.645559,-79.629774],[46.645105,-79.629087],[46.644946,-79.628413],[46.645069,-79.627835],[46.645257,-79.627176],[46.645539,-79.626491],[46.645779,-79.625716],[46.6461,-79.624955],[46.646289,-79.624322],[46.646443,-79.623619],[46.646528,-79.622761],[46.646533,-79.622247],[46.646311,-79.621511],[46.645919,-79.620902],[46.64553,-79.620549],[46.645302,-79.620223],[46.645098,-79.619965],[46.644895,-79.619721],[46.644681,-79.619505],[46.644373,-79.619169],[46.643801,-79.618381],[46.643466,-79.617869],[46.643179,-79.617382],[46.64295,-79.616965],[46.642515,-79.615934],[46.642272,-79.61498],[46.642382,-79.614291],[46.642353,-79.61348],[46.642065,-79.613441],[46.641532,-79.613449],[46.641092,-79.613471],[46.640368,-79.613448],[46.63975,-79.613376],[46.639049,-79.613353],[46.6385,-79.613322],[46.637932,-79.613295],[46.637415,-79.61325],[46.636886,-79.613238],[46.636224,-79.61325],[46.635597,-79.613247],[46.63523,-79.613267],[46.634722,-79.613276],[46.63431,-79.613263],[46.634024,-79.613271],[46.633559,-79.613279],[46.633235,-79.613291],[46.632962,-79.613292],[46.632693,-79.613264],[46.632248,-79.613242],[46.631899,-79.613273],[46.631424,-79.613275],[46.631007,-79.61328],[46.630435,-79.613321],[46.629916,-79.61331],[46.62948,-79.613317],[46.629132,-79.61336],[46.628743,-79.613424],[46.628279,-79.613468],[46.62787,-79.613539],[46.62752,-79.613578],[46.627215,-79.613629],[46.62695,-79.613629],[46.626703,-79.613639],[46.626318,-79.613655],[46.62594,-79.613704],[46.625498,-79.613805],[46.625134,-79.613902],[46.624611,-79.614067],[46.623926,-79.614272],[46.623709,-79.614429],[46.623394,-79.614736],[46.623063,-79.615031],[46.622679,-79.615216],[46.622491,-79.615299],[46.622473,-79.615321],[46.622466,-79.615325],[46.62249,-79.615301],[46.622464,-79.615384],[46.622484,-79.615325],[46.622218,-79.6153],[46.621909,-79.615386],[46.621458,-79.615904],[46.621411,-79.616523],[46.621424,-79.617384],[46.621331,-79.618012],[46.6213,-79.618685],[46.62134,-79.619167],[46.621463,-79.619891],[46.621498,-79.620286],[46.621618,-79.620763],[46.621656,-79.620817],[46.621574,-79.620365],[46.621552,-79.619956],[46.621443,-79.61958],[46.621381,-79.618989],[46.62142,-79.618631],[46.621425,-79.618163],[46.621452,-79.617634],[46.621504,-79.617233],[46.621467,-79.61658],[46.621545,-79.615917],[46.621698,-79.615706],[46.621995,-79.615189],[46.622268,-79.615399],[46.622431,-79.6154],[46.622178,-79.615289],[46.62192,-79.615213],[46.621592,-79.615603],[46.621497,-79.616133],[46.621523,-79.616883],[46.621364,-79.617936],[46.621313,-79.618726],[46.621383,-79.619155],[46.621506,-79.619967],[46.621525,-79.620325],[46.621576,-79.62073],[46.621652,-79.620784],[46.621653,-79.620828],[46.621668,-79.620872],[46.621666,-79.620866],[46.621662,-79.620856],[46.621664,-79.620861],[46.621305,-79.621161],[46.620945,-79.621132],[46.620319,-79.621401],[46.619916,-79.621992],[46.619705,-79.622312],[46.619514,-79.62269],[46.619268,-79.622943],[46.619003,-79.623253],[46.618668,-79.623529],[46.61829,-79.623706],[46.61795,-79.623816],[46.617546,-79.624116],[46.617223,-79.624567],[46.617188,-79.625055],[46.617021,-79.625628],[46.616672,-79.625964],[46.616286,-79.626208],[46.615953,-79.626352],[46.615623,-79.626522],[46.615441,-79.626642],[46.615149,-79.626859],[46.614704,-79.627135],[46.614373,-79.627358],[46.613988,-79.627522],[46.613568,-79.627718],[46.613248,-79.627864],[46.612986,-79.628024],[46.612725,-79.628148],[46.612393,-79.628229],[46.611921,-79.62834],[46.611459,-79.628431],[46.611117,-79.628485],[46.610741,-79.628606],[46.610348,-79.628711],[46.609705,-79.628874],[46.609362,-79.629065],[46.608803,-79.629335],[46.608491,-79.629475],[46.608165,-79.629613],[46.607755,-79.629775],[46.607301,-79.629909],[46.606956,-79.629965],[46.606658,-79.630012],[46.605985,-79.630128],[46.605311,-79.63026],[46.604964,-79.630341],[46.604568,-79.630454],[46.604167,-79.630496],[46.603754,-79.630625],[46.603507,-79.630695],[46.603124,-79.630846],[46.602748,-79.63104],[46.602308,-79.631228],[46.602032,-79.631347],[46.601711,-79.631522],[46.601469,-79.63166],[46.601122,-79.631861],[46.600727,-79.632074],[46.600268,-79.63226],[46.599728,-79.632451],[46.599345,-79.632581],[46.598866,-79.632724],[46.598146,-79.632953],[46.597541,-79.633152],[46.597022,-79.633293],[46.596362,-79.63346],[46.59594,-79.633552],[46.595194,-79.633786],[46.5946,-79.633926],[46.593829,-79.634097],[46.593037,-79.63431],[46.592323,-79.63452],[46.591799,-79.634754],[46.591351,-79.63496],[46.590838,-79.635168],[46.590165,-79.635353],[46.589541,-79.635539],[46.58895,-79.635555],[46.588458,-79.635458],[46.588237,-79.635427],[46.588184,-79.635408],[46.588186,-79.635411],[46.588172,-79.635207],[46.588116,-79.635048],[46.587925,-79.634387],[46.587677,-79.633991],[46.587244,-79.633563],[46.587061,-79.633023],[46.587102,-79.633018],[46.587061,-79.63318]];
        const waypoints = [{"lat":46.593136,"lng":-79.633703,"label":"Start","type":"start"},{"lat":46.663151,"lng":-79.62703,"label":"10"},{"lat":46.626888,"lng":-79.613634,"label":"20"},{"lat":46.587061,"lng":-79.63318,"label":"End","type":"end"}];
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [46.625135, -79.6220185], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>