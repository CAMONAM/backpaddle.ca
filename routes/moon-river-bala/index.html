<!DOCTYPE html>
<html>
<head>
    <title>Moon River ‚Äî Bala to Georgian Bay - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar {
            position: absolute; top: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%);
            color: white; padding: 10px 15px; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: white; border-radius: 16px 16px 0 0;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000;
            max-height: 50vh; transition: transform 0.3s ease;
        }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) {
            .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); }
            .info-panel.collapsed { transform: translateY(0); }
            .info-panel.collapsed .panel-content { display: none; }
            .panel-handle { display: none; }
        }
    </style>
<script src="/gate.js"></script>
</head>
<body>
    <div class="header-bar">
        <a href="../../">‚Üê Back</a>
        <a href="../../"><h1>üõ∂ Moon River ‚Äî Bala to Georgian Bay</h1></a>
        <span style="width:40px"></span>
    </div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 41 km</p>
            <p><strong>Region:</strong> Muskoka</p>
            <p><strong>Date:</strong> Sep 2022</p>
            
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[45.014278,-79.617066],[45.014411,-79.617544],[45.014745,-79.618461],[45.01518,-79.619683],[45.015539,-79.620899],[45.015867,-79.621964],[45.016331,-79.622873],[45.01698,-79.624288],[45.017428,-79.625228],[45.018291,-79.626884],[45.019094,-79.628238],[45.019991,-79.629728],[45.020847,-79.631295],[45.021493,-79.632562],[45.021912,-79.633396],[45.022454,-79.634698],[45.022952,-79.636975],[45.023211,-79.638045],[45.023436,-79.639627],[45.023304,-79.641043],[45.023193,-79.6421],[45.023195,-79.643406],[45.023187,-79.644965],[45.023305,-79.646721],[45.023277,-79.647769],[45.023473,-79.649725],[45.023578,-79.651258],[45.023479,-79.653338],[45.023343,-79.654764],[45.023299,-79.655885],[45.023563,-79.657382],[45.02388,-79.658915],[45.024024,-79.660649],[45.024326,-79.66277],[45.024519,-79.664564],[45.024749,-79.666389],[45.024956,-79.668559],[45.024896,-79.66981],[45.024712,-79.671615],[45.024385,-79.672555],[45.023246,-79.673868],[45.022467,-79.674766],[45.022246,-79.676047],[45.022471,-79.676985],[45.022849,-79.678273],[45.02321,-79.679521],[45.023692,-79.680939],[45.024091,-79.682347],[45.02443,-79.683496],[45.02518,-79.685354],[45.02519,-79.685485],[45.025189,-79.685487],[45.025202,-79.685393],[45.025541,-79.686953],[45.025498,-79.686883],[45.025514,-79.686859],[45.02548,-79.686851],[45.025629,-79.687802],[45.026114,-79.689018],[45.026381,-79.690377],[45.026577,-79.691763],[45.026818,-79.693127],[45.026876,-79.693354],[45.026864,-79.693356],[45.026955,-79.693511],[45.027153,-79.693793],[45.02707,-79.693881],[45.02718,-79.694145],[45.027104,-79.693687],[45.026922,-79.693347],[45.026856,-79.693453],[45.026765,-79.69328],[45.026724,-79.693138],[45.026688,-79.693232],[45.026465,-79.693443],[45.026626,-79.693993],[45.026881,-79.694473],[45.027167,-79.694603],[45.027357,-79.694783],[45.027571,-79.69516],[45.027649,-79.695036],[45.027344,-79.694357],[45.027027,-79.693992],[45.026626,-79.693567],[45.026767,-79.693307],[45.026754,-79.69316],[45.02656,-79.693385],[45.026673,-79.694058],[45.02695,-79.694439],[45.027247,-79.694421],[45.027543,-79.695027],[45.027663,-79.695061],[45.027604,-79.695143],[45.027732,-79.695184],[45.027616,-79.695199],[45.02776,-79.69577],[45.028252,-79.695872],[45.028332,-79.696173],[45.028286,-79.695795],[45.028375,-79.696282],[45.028448,-79.696264],[45.028769,-79.696659],[45.029017,-79.69766],[45.029159,-79.699023],[45.029298,-79.700699],[45.029517,-79.702332],[45.029718,-79.703182],[45.029863,-79.703931],[45.030011,-79.704059],[45.0302,-79.705677],[45.030302,-79.707061],[45.030827,-79.708988],[45.031312,-79.710556],[45.031712,-79.711897],[45.031824,-79.712595],[45.032064,-79.713446],[45.03234,-79.714646],[45.032538,-79.715374],[45.03256,-79.715482],[45.032582,-79.715594],[45.032632,-79.716008],[45.032748,-79.716516],[45.032738,-79.716675],[45.032772,-79.716862],[45.032626,-79.7169],[45.032654,-79.717032],[45.032638,-79.717333],[45.032944,-79.718011],[45.033123,-79.718571],[45.033422,-79.719528],[45.033746,-79.72075],[45.03418,-79.721981],[45.034538,-79.722839],[45.035057,-79.723842],[45.035776,-79.724702],[45.036553,-79.725559],[45.037419,-79.727052],[45.037844,-79.728487],[45.038405,-79.729443],[45.03908,-79.730489],[45.039863,-79.731255],[45.041174,-79.731501],[45.042418,-79.732034],[45.043081,-79.732631],[45.043844,-79.733739],[45.044657,-79.734969],[45.045545,-79.73618],[45.046256,-79.73809],[45.046836,-79.739323],[45.047384,-79.740498],[45.048034,-79.742038],[45.04832,-79.742936],[45.048967,-79.744887],[45.049852,-79.746257],[45.050538,-79.747088],[45.050917,-79.74739],[45.051107,-79.748307],[45.05144,-79.748569],[45.051673,-79.749088],[45.051703,-79.749251],[45.051704,-79.748729],[45.051455,-79.748409],[45.051648,-79.748777],[45.052448,-79.749625],[45.05304,-79.75035],[45.053726,-79.752047],[45.053707,-79.752198],[45.054117,-79.753874],[45.054427,-79.755495],[45.054665,-79.756636],[45.054778,-79.75695],[45.054725,-79.756887],[45.054728,-79.757008],[45.054826,-79.75704],[45.054818,-79.757362],[45.054969,-79.757886],[45.055077,-79.758382],[45.055441,-79.758672],[45.055424,-79.758779],[45.055344,-79.758572],[45.055115,-79.758317],[45.055017,-79.75789],[45.054947,-79.757339],[45.054806,-79.757028],[45.05477,-79.75736],[45.055019,-79.758117],[45.055203,-79.758646],[45.055327,-79.758684],[45.055457,-79.758542],[45.055508,-79.758775],[45.055338,-79.758665],[45.05544,-79.758763],[45.055422,-79.758673],[45.055583,-79.758803],[45.055349,-79.758693],[45.055457,-79.75868],[45.055465,-79.758706],[45.055384,-79.758677],[45.055378,-79.75866],[45.055383,-79.758661],[45.055385,-79.758664],[45.055405,-79.758672],[45.05543,-79.758565],[45.055439,-79.758569],[45.055425,-79.75861],[45.055854,-79.760023],[45.056196,-79.760979],[45.056325,-79.761299],[45.056312,-79.761367],[45.056346,-79.761735],[45.056458,-79.762205],[45.056319,-79.76234],[45.055933,-79.763175],[45.055957,-79.763769],[45.056031,-79.763587],[45.056027,-79.763526],[45.056012,-79.763994],[45.05615,-79.764629],[45.056138,-79.765652],[45.056175,-79.766691],[45.056534,-79.767962],[45.056672,-79.768689],[45.057211,-79.770772],[45.058065,-79.771983],[45.058714,-79.773351],[45.059381,-79.774923],[45.059633,-79.775227],[45.060207,-79.775893],[45.060697,-79.777518],[45.060993,-79.778333],[45.061065,-79.778724],[45.061135,-79.778911],[45.061499,-79.779611],[45.062181,-79.780949],[45.062814,-79.782527],[45.063251,-79.784455],[45.063374,-79.786127],[45.063629,-79.787495],[45.064195,-79.788944],[45.064921,-79.790955],[45.065237,-79.792371],[45.065652,-79.793881],[45.066239,-79.795484],[45.066362,-79.795681],[45.06641,-79.795807],[45.06643,-79.795838],[45.066444,-79.795879],[45.066613,-79.79656],[45.066729,-79.796876],[45.066872,-79.797167],[45.066855,-79.79715],[45.066854,-79.797139],[45.066879,-79.797171],[45.067594,-79.798297],[45.067778,-79.798572],[45.067817,-79.798566],[45.06786,-79.798806],[45.067934,-79.798822],[45.068029,-79.799045],[45.068428,-79.800232],[45.068676,-79.800958],[45.068691,-79.801252],[45.068834,-79.801937],[45.068936,-79.802261],[45.068941,-79.802558],[45.069033,-79.802766],[45.069319,-79.803695],[45.069566,-79.804478],[45.069964,-79.805166],[45.070097,-79.805165],[45.070358,-79.806094],[45.070431,-79.806692],[45.070883,-79.808247],[45.071138,-79.808866],[45.071507,-79.809139],[45.071793,-79.81008],[45.07186,-79.810358],[45.071922,-79.811328],[45.07244,-79.813056],[45.072883,-79.814754],[45.07349,-79.816968],[45.073776,-79.817611],[45.073754,-79.817827],[45.07412,-79.818739],[45.074397,-79.819806],[45.074712,-79.820989],[45.075052,-79.822699],[45.075734,-79.824695],[45.076357,-79.826687],[45.076883,-79.829063],[45.07715,-79.83075],[45.078072,-79.831936],[45.078601,-79.832336],[45.078768,-79.83212],[45.07869,-79.832166],[45.079004,-79.832168],[45.078951,-79.83207],[45.078573,-79.831911],[45.078517,-79.831863],[45.078727,-79.832191],[45.078742,-79.832235],[45.078645,-79.831863],[45.078713,-79.832271],[45.078753,-79.832189],[45.078582,-79.831872],[45.078588,-79.831947],[45.07852,-79.831941],[45.07855,-79.831989],[45.078484,-79.832006],[45.078503,-79.832034],[45.078536,-79.831967],[45.078531,-79.83191],[45.078521,-79.831977],[45.078574,-79.831999],[45.078502,-79.831945],[45.078517,-79.831949],[45.078524,-79.831945],[45.078575,-79.831978],[45.078614,-79.831938],[45.078659,-79.832016],[45.078613,-79.831999],[45.078637,-79.831948],[45.078522,-79.831941],[45.078587,-79.831999],[45.078629,-79.831999],[45.078678,-79.832383],[45.078927,-79.833014],[45.079483,-79.835087],[45.080157,-79.837061],[45.080796,-79.8386],[45.081641,-79.840905],[45.082244,-79.842639],[45.082747,-79.843958],[45.083084,-79.846789],[45.083574,-79.848827],[45.084311,-79.851185],[45.084747,-79.852252],[45.084779,-79.852641],[45.084762,-79.852634],[45.084807,-79.85266],[45.084681,-79.852819],[45.084799,-79.853233],[45.08493,-79.853915],[45.085307,-79.854256],[45.085445,-79.854799],[45.085742,-79.855208],[45.085921,-79.855275],[45.085666,-79.855065],[45.08527,-79.854443],[45.085148,-79.853941],[45.084984,-79.853232],[45.084855,-79.852759],[45.08486,-79.852651],[45.084782,-79.852639],[45.084742,-79.852996],[45.084918,-79.853914],[45.085169,-79.85446],[45.08559,-79.855174],[45.085962,-79.855197],[45.085948,-79.855195],[45.085928,-79.855193],[45.08595,-79.855157],[45.085943,-79.855148],[45.085944,-79.855175],[45.085935,-79.855182],[45.086006,-79.855312],[45.08603,-79.855302],[45.086029,-79.855397],[45.086518,-79.85645],[45.086989,-79.857592],[45.087692,-79.858648],[45.088229,-79.859616],[45.088825,-79.860974],[45.089529,-79.862593],[45.090342,-79.864358],[45.090981,-79.865674],[45.091943,-79.867836],[45.092579,-79.869634],[45.093369,-79.871961],[45.094123,-79.874082],[45.094985,-79.87599],[45.095851,-79.878096],[45.096535,-79.879882],[45.097211,-79.88196],[45.097513,-79.883239],[45.097455,-79.884456],[45.098066,-79.885832],[45.098956,-79.887661],[45.099555,-79.889525],[45.100306,-79.891409],[45.100918,-79.893224],[45.101438,-79.894779],[45.101751,-79.895264],[45.101921,-79.896608],[45.10141,-79.898506],[45.101251,-79.899781],[45.101286,-79.899788],[45.101273,-79.899819],[45.101406,-79.900438],[45.101608,-79.900945],[45.101823,-79.901156],[45.101618,-79.900837],[45.101432,-79.900291],[45.10131,-79.899841],[45.101467,-79.900627],[45.101696,-79.901115],[45.101762,-79.901199],[45.101794,-79.901422],[45.102149,-79.90236],[45.102664,-79.903794],[45.103291,-79.905053],[45.103874,-79.907168],[45.104495,-79.909572],[45.105515,-79.911947],[45.106135,-79.914354],[45.106332,-79.915459],[45.106495,-79.915463],[45.10657,-79.915887],[45.106488,-79.915729],[45.106557,-79.915864],[45.1067,-79.916989],[45.105697,-79.918694],[45.10514,-79.919612],[45.10485,-79.920496],[45.104936,-79.92047],[45.104958,-79.920437],[45.105272,-79.921169],[45.105568,-79.921848],[45.105649,-79.922453],[45.105694,-79.923166],[45.105734,-79.923615],[45.105631,-79.923976],[45.105628,-79.923935],[45.105689,-79.923437],[45.105589,-79.922984],[45.105568,-79.922513],[45.105632,-79.921867],[45.105408,-79.921269],[45.105101,-79.920494],[45.104986,-79.920429],[45.105136,-79.920583],[45.105237,-79.920956],[45.105461,-79.921513],[45.105683,-79.92242],[45.105631,-79.923143],[45.105646,-79.92382],[45.105669,-79.923942],[45.105643,-79.924072],[45.105634,-79.923971],[45.105649,-79.924756],[45.106363,-79.926214],[45.10672,-79.927295],[45.10694,-79.928746],[45.107405,-79.930786],[45.107613,-79.932755],[45.107613,-79.934462],[45.107869,-79.936963],[45.108473,-79.938491],[45.109072,-79.940028],[45.109521,-79.941773],[45.109766,-79.943216],[45.110082,-79.944885],[45.110415,-79.946632],[45.110761,-79.948626],[45.11101,-79.950158],[45.111326,-79.952412],[45.11148,-79.953845],[45.111802,-79.955783],[45.112325,-79.958187],[45.112694,-79.959158],[45.113016,-79.959647],[45.113521,-79.961317],[45.114024,-79.963248],[45.114543,-79.965568],[45.115191,-79.967823],[45.116153,-79.969634],[45.117,-79.970365],[45.118071,-79.971223],[45.119574,-79.972118],[45.12068,-79.97284],[45.122213,-79.973716],[45.123414,-79.97436],[45.125048,-79.975537],[45.126383,-79.97578],[45.127634,-79.977281],[45.128694,-79.979016],[45.129776,-79.980571],[45.130773,-79.981724],[45.131897,-79.983386],[45.133117,-79.984693],[45.134164,-79.98475],[45.135072,-79.984763],[45.135943,-79.984743],[45.137369,-79.984867],[45.138478,-79.984901],[45.139402,-79.984798],[45.141026,-79.98441],[45.141846,-79.984159],[45.142599,-79.984433],[45.142857,-79.984331],[45.142859,-79.983294],[45.142843,-79.983751],[45.14274,-79.984448],[45.142727,-79.984457],[45.142728,-79.984472],[45.14273,-79.984473],[45.142724,-79.984508],[45.142734,-79.98447],[45.142687,-79.984418],[45.142672,-79.984434],[45.14263,-79.984515],[45.142491,-79.984618],[45.142697,-79.984498],[45.142738,-79.984478],[45.142687,-79.984483],[45.142718,-79.98445],[45.142699,-79.984478],[45.142703,-79.984509],[45.142723,-79.984516],[45.142728,-79.984446],[45.142725,-79.984443]];
        const waypoints = [{"lat":45.014278,"lng":-79.617066,"label":"Start","type":"start"},{"lat":45.032696,"lng":-79.717662,"label":"10"},{"lat":45.067666,"lng":-79.798432,"label":"20"},{"lat":45.094727,"lng":-79.875401,"label":"30"},{"lat":45.142726,"lng":-79.984432,"label":"40"},{"lat":45.142725,"lng":-79.984443,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {cyclosm, topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [45.0785685, -79.8009835], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>