<!DOCTYPE html>
<html>
<head>
    <title>Algonquin ‚Äî Manitou Lake - Backpaddle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .header-bar { position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 100%); color: white; padding: 10px 15px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-bar a { color: white; text-decoration: none; }
        .header-bar h1 { font-size: 1rem; font-weight: 500; }
        .info-panel { position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 16px 16px 0 0; box-shadow: 0 -2px 20px rgba(0,0,0,0.15); z-index: 1000; max-height: 50vh; transition: transform 0.3s ease; }
        .info-panel.collapsed { transform: translateY(calc(100% - 50px)); }
        .panel-handle { width: 40px; height: 4px; background: #ccc; border-radius: 2px; margin: 10px auto; cursor: pointer; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0 15px 10px; border-bottom: 1px solid #eee; }
        .panel-header h2 { font-size: 15px; color: #333; }
        .toggle-btn { background: none; border: none; font-size: 20px; cursor: pointer; }
        .panel-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 70px); }
        .panel-content p { font-size: 13px; color: #666; margin-bottom: 6px; }
        .btn { display: block; background: #1a472a; color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-size: 13px; margin-top: 12px; }
        .layer-toggle { display: flex; gap: 5px; margin-top: 10px; }
        .layer-btn { flex: 1; padding: 8px; border: 1px solid #ddd; background: white; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .layer-btn.active { background: #1a472a; color: white; border-color: #1a472a; }
        .distance-marker { background: #FF5722; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; font-size: 9px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .start-marker { background: #4CAF50; width: 24px; height: 24px; line-height: 24px; }
        .end-marker { background: #f44336; width: 24px; height: 24px; line-height: 24px; }
        @media (min-width: 600px) { .info-panel { top: 60px; bottom: auto; left: auto; right: 15px; width: 280px; border-radius: 12px; max-height: calc(100vh - 80px); } .info-panel.collapsed { transform: translateY(0); } .info-panel.collapsed .panel-content { display: none; } .panel-handle { display: none; } }
    </style>
</head>
<body>
    <div class="header-bar"><a href="../../">‚Üê Back</a><a href="../../"><h1>üõ∂ Algonquin ‚Äî Manitou Lake</h1></a><span style="width:40px"></span></div>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <div class="panel-handle" onclick="togglePanel()"></div>
        <div class="panel-header"><h2>Route Details</h2><button class="toggle-btn" onclick="togglePanel()">‚àí</button></div>
        <div class="panel-content">
            <p><strong>Distance:</strong> 45 km</p>
            <p><strong>Region:</strong> Algonquin</p>
            <p><strong>Date:</strong> Aug 2021</p>
            <a href="route.gpx" download class="btn">üì• Download GPX</a>
            <div class="layer-toggle">
                <button class="layer-btn active" data-layer="topo">Topo</button>
                <button class="layer-btn" data-layer="satellite">Satellite</button>
                <button class="layer-btn" data-layer="street">Street</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const routeCoords = [[45.923008,-79.176885],[45.92363,-79.175491],[45.923722,-79.174224],[45.923815,-79.172993],[45.923846,-79.172194],[45.923965,-79.171112],[45.924001,-79.169757],[45.924041,-79.168906],[45.92431,-79.167514],[45.924484,-79.165651],[45.924665,-79.163905],[45.924775,-79.162391],[45.924809,-79.161214],[45.924903,-79.159953],[45.924976,-79.15846],[45.92497,-79.157161],[45.925024,-79.155728],[45.924967,-79.154931],[45.92498,-79.153632],[45.925177,-79.151809],[45.925363,-79.150384],[45.925781,-79.150233],[45.92618,-79.14998],[45.926482,-79.150265],[45.926954,-79.150038],[45.926982,-79.150188],[45.927085,-79.150175],[45.927058,-79.149551],[45.9276,-79.149267],[45.927938,-79.148765],[45.928605,-79.148649],[45.928823,-79.14842],[45.928576,-79.147506],[45.929227,-79.147068],[45.929477,-79.145905],[45.929374,-79.144762],[45.930459,-79.144538],[45.930892,-79.143765],[45.930708,-79.143227],[45.93117,-79.142401],[45.93172,-79.141492],[45.932003,-79.140188],[45.932018,-79.139223],[45.932354,-79.138996],[45.932507,-79.138351],[45.932816,-79.137739],[45.932921,-79.136615],[45.932939,-79.135354],[45.933477,-79.135798],[45.934,-79.134809],[45.934613,-79.134483],[45.935134,-79.133557],[45.935506,-79.13246],[45.935653,-79.131772],[45.935639,-79.130637],[45.935909,-79.129163],[45.935873,-79.127923],[45.935755,-79.126866],[45.935842,-79.125227],[45.936053,-79.123648],[45.936366,-79.122079],[45.936382,-79.121878],[45.936364,-79.121858],[45.936368,-79.121857],[45.936362,-79.121698],[45.936429,-79.120945],[45.936456,-79.120898],[45.936459,-79.120915],[45.936388,-79.120332],[45.936157,-79.119697],[45.93526,-79.11889],[45.934423,-79.117867],[45.934574,-79.116636],[45.934522,-79.115582],[45.934844,-79.11422],[45.934406,-79.11336],[45.93434,-79.112854],[45.934441,-79.112817],[45.934459,-79.112312],[45.934451,-79.111601],[45.934662,-79.110897],[45.934811,-79.110308],[45.93492,-79.109666],[45.934844,-79.109285],[45.934868,-79.109463],[45.93485,-79.109367],[45.934881,-79.10929],[45.934889,-79.108813],[45.93495,-79.107973],[45.934995,-79.107443],[45.935204,-79.10715],[45.93529,-79.106434],[45.935345,-79.105459],[45.935451,-79.104524],[45.935638,-79.103235],[45.935891,-79.101833],[45.935896,-79.100312],[45.935933,-79.099138],[45.936051,-79.097656],[45.93612,-79.096441],[45.936229,-79.095112],[45.936376,-79.093487],[45.936516,-79.091912],[45.936625,-79.090435],[45.936722,-79.088627],[45.936747,-79.087003],[45.936787,-79.085651],[45.936906,-79.083444],[45.93702,-79.082132],[45.937087,-79.080605],[45.937257,-79.079098],[45.93738,-79.07744],[45.937604,-79.075152],[45.937785,-79.073377],[45.937967,-79.071662],[45.938044,-79.070031],[45.93825,-79.06836],[45.93837,-79.067344],[45.938581,-79.06581],[45.938658,-79.064732],[45.938734,-79.063885],[45.938874,-79.062981],[45.939074,-79.06151],[45.939239,-79.059926],[45.939389,-79.058934],[45.939534,-79.057387],[45.93966,-79.056142],[45.939885,-79.054916],[45.940103,-79.053696],[45.940308,-79.051938],[45.940482,-79.050276],[45.940719,-79.04873],[45.940906,-79.047348],[45.941077,-79.046096],[45.941204,-79.044316],[45.941422,-79.042882],[45.941736,-79.041349],[45.941814,-79.040175],[45.941932,-79.038953],[45.942293,-79.037785],[45.942666,-79.037129],[45.943268,-79.036406],[45.944227,-79.035677],[45.945026,-79.034872],[45.94581,-79.033901],[45.946393,-79.032961],[45.946932,-79.032076],[45.947646,-79.031228],[45.9483,-79.030792],[45.949324,-79.030413],[45.950633,-79.029905],[45.951531,-79.02943],[45.952824,-79.028686],[45.954172,-79.027968],[45.955483,-79.02709],[45.956377,-79.026353],[45.957436,-79.025674],[45.958132,-79.025175],[45.959093,-79.024099],[45.959788,-79.023424],[45.960466,-79.02257],[45.961613,-79.021343],[45.962539,-79.020401],[45.963545,-79.019189],[45.964424,-79.018401],[45.96511,-79.017789],[45.965718,-79.016855],[45.966504,-79.015933],[45.967466,-79.015105],[45.968004,-79.01449],[45.968901,-79.013393],[45.969426,-79.012984],[45.970114,-79.01228],[45.970727,-79.011851],[45.971679,-79.011043],[45.972509,-79.010565],[45.973421,-79.00996],[45.974145,-79.009538],[45.974566,-79.009271],[45.974597,-79.009231],[45.9746,-79.009234],[45.974598,-79.009231],[45.974604,-79.009217],[45.974678,-79.009191],[45.974677,-79.009159],[45.974872,-79.009175],[45.975037,-79.009133],[45.975034,-79.009068],[45.975048,-79.009133],[45.975291,-79.00937],[45.975597,-79.009301],[45.976246,-79.009273],[45.976501,-79.008823],[45.976711,-79.008041],[45.976884,-79.00749],[45.977103,-79.007122],[45.977312,-79.007322],[45.977687,-79.007299],[45.977699,-79.007294],[45.977735,-79.007279],[45.977728,-79.007251],[45.977759,-79.007238],[45.977739,-79.007258],[45.977721,-79.007301],[45.977742,-79.007248],[45.978438,-79.006832],[45.979617,-79.006666],[45.980961,-79.006515],[45.982391,-79.006348],[45.983953,-79.006082],[45.984917,-79.005839],[45.986029,-79.005846],[45.987575,-79.005559],[45.988628,-79.005295],[45.989684,-79.004827],[45.990442,-79.004509],[45.991683,-79.003843],[45.992513,-79.002835],[45.992929,-79.002203],[45.993599,-79.001429],[45.994564,-78.999801],[45.995356,-78.998129],[45.99603,-78.997133],[45.9966,-78.996019],[45.996999,-78.995357],[45.997313,-78.995131],[45.99776,-78.994325],[45.998493,-78.993096],[45.999148,-78.992185],[45.999847,-78.990778],[46.000598,-78.989531],[46.001283,-78.988565],[46.001946,-78.987471],[46.00272,-78.986319],[46.003226,-78.985603],[46.003979,-78.984506],[46.004943,-78.983323],[46.005753,-78.982293],[46.007012,-78.981409],[46.007817,-78.980879],[46.0087,-78.980191],[46.009664,-78.979283],[46.010698,-78.978029],[46.011452,-78.976792],[46.012031,-78.975628],[46.012467,-78.974187],[46.01317,-78.972984],[46.013441,-78.972697],[46.013367,-78.972762],[46.013401,-78.97273],[46.01335,-78.972588],[46.012421,-78.973489],[46.011377,-78.974611],[46.010482,-78.975644],[46.009552,-78.976791],[46.008536,-78.977955],[46.007421,-78.979074],[46.006308,-78.980425],[46.00536,-78.981678],[46.004481,-78.98282],[46.00324,-78.984404],[46.002299,-78.98543],[46.000985,-78.986643],[45.999979,-78.987626],[45.998669,-78.988746],[45.997786,-78.989752],[45.99691,-78.990702],[45.995665,-78.991876],[45.9949,-78.992824],[45.994055,-78.993704],[45.993019,-78.994839],[45.9916,-78.996137],[45.990745,-78.997167],[45.989825,-78.998121],[45.988804,-78.999163],[45.987624,-79.000146],[45.986519,-79.001308],[45.985418,-79.002095],[45.984543,-79.002728],[45.983432,-79.003697],[45.982169,-79.004589],[45.980605,-79.005502],[45.97944,-79.006225],[45.978264,-79.006822],[45.977739,-79.00724],[45.977782,-79.007293],[45.977672,-79.007203],[45.977742,-79.007258],[45.977711,-79.007227],[45.977712,-79.007234],[45.977708,-79.007236],[45.977319,-79.006945],[45.976883,-79.007156],[45.97646,-79.007956],[45.976355,-79.008669],[45.97578,-79.009097],[45.975299,-79.009083],[45.97505,-79.009036],[45.974752,-79.00896],[45.974532,-79.009086],[45.974529,-79.009142],[45.974568,-79.009113],[45.97448,-79.009153],[45.974555,-79.009197],[45.97458,-79.00917],[45.974587,-79.009221],[45.974457,-79.009257],[45.974485,-79.009271],[45.974473,-79.0093],[45.974491,-79.009286],[45.974491,-79.009288],[45.974587,-79.009266],[45.974565,-79.009286],[45.974549,-79.009278],[45.974562,-79.009281],[45.974562,-79.009281],[45.974562,-79.009281],[45.97442,-79.009269],[45.974463,-79.009244],[45.974467,-79.009245],[45.974451,-79.009267],[45.974508,-79.009226],[45.974552,-79.009224],[45.974544,-79.009206],[45.974531,-79.009184],[45.974531,-79.009186],[45.974017,-79.009475],[45.973489,-79.009699],[45.973071,-79.009941],[45.972457,-79.010318],[45.971867,-79.010656],[45.971386,-79.011073],[45.9707,-79.011436],[45.970209,-79.011691],[45.969556,-79.012032],[45.968955,-79.01231],[45.968444,-79.012599],[45.967919,-79.012945],[45.967293,-79.013273],[45.966687,-79.013621],[45.966078,-79.01393],[45.965364,-79.014345],[45.964672,-79.014711],[45.963632,-79.015225],[45.962765,-79.015619],[45.962156,-79.015983],[45.961375,-79.01641],[45.96077,-79.016837],[45.960019,-79.017434],[45.959255,-79.018091],[45.958568,-79.018622],[45.95809,-79.018926],[45.957472,-79.019391],[45.956673,-79.020021],[45.955865,-79.020747],[45.955157,-79.021387],[45.954578,-79.021929],[45.953917,-79.022548],[45.95333,-79.02323],[45.952566,-79.02416],[45.952037,-79.024874],[45.951503,-79.025608],[45.950824,-79.026438],[45.950191,-79.027246],[45.949562,-79.027967],[45.949001,-79.028549],[45.94835,-79.02934],[45.947757,-79.030027],[45.94723,-79.030798],[45.946663,-79.031664],[45.945997,-79.032565],[45.945446,-79.03349],[45.944935,-79.034237],[45.94428,-79.035102],[45.943502,-79.03612],[45.942773,-79.036766],[45.942251,-79.037474],[45.942261,-79.037496],[45.942149,-79.037992],[45.941856,-79.039131],[45.941552,-79.040519],[45.941347,-79.041751],[45.941116,-79.042835],[45.940932,-79.04401],[45.940759,-79.045294],[45.940595,-79.046444],[45.94039,-79.047552],[45.940232,-79.048763],[45.940055,-79.050104],[45.939903,-79.051363],[45.939722,-79.052806],[45.939595,-79.053962],[45.939407,-79.055232],[45.939229,-79.05663],[45.939085,-79.057936],[45.938852,-79.059558],[45.938745,-79.060819],[45.938627,-79.061868],[45.938436,-79.063168],[45.938262,-79.064759],[45.938125,-79.065969],[45.938044,-79.067369],[45.937865,-79.068757],[45.937745,-79.069596],[45.937594,-79.070999],[45.937463,-79.072229],[45.937267,-79.073964],[45.937195,-79.075321],[45.937084,-79.076271],[45.936877,-79.078093],[45.936769,-79.078987],[45.936651,-79.080304],[45.936677,-79.081888],[45.936553,-79.083178],[45.936338,-79.085005],[45.936117,-79.086626],[45.935799,-79.08835],[45.935557,-79.089973],[45.935349,-79.091696],[45.935179,-79.09323],[45.935056,-79.0949],[45.9349,-79.096623],[45.93484,-79.098109],[45.934848,-79.099271],[45.934842,-79.10042],[45.934776,-79.102395],[45.934723,-79.104106],[45.93472,-79.105695],[45.934769,-79.107216],[45.934892,-79.108682],[45.934854,-79.109276],[45.934888,-79.109435],[45.934851,-79.109357],[45.934886,-79.109427],[45.93482,-79.109903],[45.934638,-79.110659],[45.934406,-79.111132],[45.934334,-79.111653],[45.934377,-79.11231],[45.934244,-79.112661],[45.934324,-79.112753],[45.934359,-79.112818],[45.934316,-79.112732],[45.934666,-79.11361],[45.934703,-79.114468],[45.934439,-79.115128],[45.934484,-79.115722],[45.934495,-79.11662],[45.934335,-79.117523],[45.934696,-79.11847],[45.935224,-79.118968],[45.935727,-79.119371],[45.936153,-79.119877],[45.936344,-79.120529],[45.93638,-79.12092],[45.936414,-79.120958],[45.936309,-79.121667],[45.936475,-79.121802],[45.936482,-79.121844],[45.936329,-79.122543],[45.936093,-79.123333],[45.935958,-79.124048],[45.935864,-79.124942],[45.935717,-79.125803],[45.935753,-79.126851],[45.93586,-79.127931],[45.935838,-79.129579],[45.935612,-79.130788],[45.935595,-79.131837],[45.935425,-79.132907],[45.934899,-79.134102],[45.934187,-79.13436],[45.933594,-79.135304],[45.933069,-79.135444],[45.932849,-79.136208],[45.932895,-79.137313],[45.932506,-79.138151],[45.932426,-79.138952],[45.93191,-79.139101],[45.931801,-79.139849],[45.932027,-79.140545],[45.931495,-79.141584],[45.93084,-79.142857],[45.930729,-79.14367],[45.930569,-79.144389],[45.929779,-79.144658],[45.929286,-79.145279],[45.929354,-79.146768],[45.928623,-79.147482],[45.9287,-79.148254],[45.928556,-79.148546],[45.928006,-79.148804],[45.92751,-79.149343],[45.927007,-79.149702],[45.926945,-79.150109],[45.926482,-79.150264],[45.925975,-79.150309],[45.925816,-79.149968],[45.92539,-79.150352],[45.92541,-79.150342],[45.925341,-79.150526],[45.925095,-79.151591],[45.924821,-79.152519],[45.924411,-79.153577],[45.924128,-79.154714],[45.923835,-79.155903],[45.923564,-79.157426],[45.923271,-79.159213],[45.922903,-79.160753],[45.922714,-79.162396],[45.922526,-79.164597],[45.922434,-79.166605],[45.922159,-79.168661],[45.921868,-79.170826],[45.921691,-79.17322],[45.92161,-79.174617],[45.921573,-79.176638],[45.921659,-79.178944],[45.921797,-79.180864],[45.922114,-79.183083],[45.922429,-79.184397],[45.922395,-79.184606]];
        const waypoints = [{"lat":45.923008,"lng":-79.176885,"label":"Start","type":"start"},{"lat":45.938188,"lng":-79.069005,"label":"10"},{"lat":46.00142,"lng":-78.988347,"label":"20"},{"lat":45.960979,"lng":-79.016665,"label":"30"},{"lat":45.9358,"lng":-79.125252,"label":"40"},{"lat":45.922395,"lng":-79.184606,"label":"End","type":"end"}];
        const cyclosm = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {subdomains: 'abc', maxZoom: 20});
        const topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 17});
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 18});
        const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19});
        const layers = {cyclosm, topo, satellite, street};
        let currentLayer = 'topo';
        const map = L.map('map', {center: [45.967507, -79.078597], zoom: 12, layers: [topo], zoomControl: false});
        L.control.zoom({position: 'topleft'}).addTo(map);
        const routeLine = L.polyline(routeCoords, {color: '#FF5722', weight: 4, opacity: 0.8}).addTo(map);
        map.fitBounds(routeLine.getBounds().pad(0.1));
        waypoints.forEach(wp => {
            let cls = 'distance-marker';
            if (wp.type === 'start') cls += ' start-marker';
            if (wp.type === 'end') cls += ' end-marker';
            const icon = L.divIcon({className: '', html: '<div class="'+cls+'">'+(wp.type === 'start' ? '‚ñ∂' : wp.type === 'end' ? '‚óº' : wp.label)+'</div>', iconSize: [20,20], iconAnchor: [10,10]});
            L.marker([wp.lat, wp.lng], {icon}).addTo(map);
        });
        document.querySelectorAll('.layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                map.removeLayer(layers[currentLayer]);
                layers[btn.dataset.layer].addTo(map);
                currentLayer = btn.dataset.layer;
            });
        });
        function togglePanel() { document.getElementById('infoPanel').classList.toggle('collapsed'); }
        if (window.innerWidth < 600) document.getElementById('infoPanel').classList.add('collapsed');
    </script>
</body>
</html>